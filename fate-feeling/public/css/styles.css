@import url('https://cdn.jsdelivr.net/npm/pretendard@latest/dist/web/static/pretendard.css');
@import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800&family=Poppins:wght@500;700;800&family=Noto+Serif+KR:wght@500;700&display=swap');

@font-face {
  font-family: 'KyoboHand2019';
  src: url('https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_20-04@2.1/KyoboHand2019.woff') format('woff');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

:root {
  --font-body: 'Pretendard', 'Noto Sans KR', -apple-system, BlinkMacSystemFont, sans-serif;
  --font-point: 'KyoboHand2019', 'Pretendard', 'Noto Sans KR', sans-serif;
  --font-number: 'Poppins', 'Montserrat', 'Pretendard', 'Noto Sans KR', sans-serif;
  --font-serif: 'Noto Serif KR', 'Nanum Myeongjo', serif;
  --bg: #1A1A2E;
  --bg-grad-start: #2D1B4B;
  --bg-grad-mid: #241d46;
  --bg-grad-end: #1A1A2E;
  --card: rgba(255, 252, 246, 0.9);
  --text: #1a1a2e;
  --muted: #5f5a72;
  --primary: #4B367C;
  --primary-2: #6d54a8;
  --gold: #d4af37;
  --primary-soft: #ede6f8;
  --border: rgba(75, 54, 124, 0.22);
  --shadow: 0 22px 46px rgba(26, 26, 46, 0.16);
}

[data-theme='dark'] {
  --bg: #141223;
  --bg-grad-start: #19152b;
  --bg-grad-mid: #231d3b;
  --bg-grad-end: #312956;
  --card: rgba(26, 26, 46, 0.82);
  --text: #f5edff;
  --muted: #cabbe2;
  --primary: #bfa8f3;
  --primary-2: #9f87db;
  --gold: #efcb64;
  --primary-soft: rgba(120, 96, 179, 0.3);
  --border: rgba(196, 173, 244, 0.28);
  --shadow: 0 24px 54px rgba(0, 0, 0, 0.45);
}

* { box-sizing: border-box; }

body {
  margin: 0;
  font-family: var(--font-body);
  background-color: #0A0B14;
  overflow-x: hidden;
  background-image:
    radial-gradient(circle at 0% 0%, rgba(18, 13, 38, 0.8) 0%, transparent 40%),
    radial-gradient(circle at 100% 100%, rgba(30, 20, 50, 0.5) 0%, transparent 40%);
  color: #E0E0E0;
  line-height: 1.6;
  min-height: 100vh;
  padding-bottom: 88px;
  animation: pageFade 0.55s ease;
  position: relative;
  -webkit-text-size-adjust: 100%;
}

.ff-starfield {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: -2;
  opacity: .7;
}
body::before {
  content: '';
  position: fixed;
  inset: 0;
  pointer-events: none;
  background: none;
  z-index: -1;
}

.container {
  width: min(1060px, 94%);
  margin: 0 auto;
  padding: 18px 0 28px;
}

header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 12px;
  margin-bottom: 20px;
}
.header-actions {
  display: flex;
  gap: 8px;
  align-items: center;
}
.nav-mini-actions {
  display: inline-flex;
  gap: 8px;
  align-items: center;
}
.icon-btn {
  min-height: 38px;
  min-width: 38px;
  padding: 8px 10px;
  font-size: 18px;
  line-height: 1;
  display: inline-grid;
  place-items: center;
}
.icon-btn.outline {
  background: transparent;
  color: var(--text);
  border: 1px solid var(--border);
}
.theme-btn {
  font-size: 12px;
  min-height: 36px;
  padding: 8px 12px;
}

.brand {
  font-weight: 700;
  letter-spacing: .2px;
  display: inline-flex;
  align-items: center;
  gap: 10px;
  color: var(--text);
}
.brand-logo {
  width: 30px;
  height: 30px;
  border-radius: 50%;
  display: inline-grid;
  place-items: center;
  border: 1px solid color-mix(in srgb, var(--gold) 74%, var(--primary));
  background: radial-gradient(circle at 35% 25%, rgba(255,255,255,.85), rgba(212,175,55,.18) 32%, rgba(75,54,124,.9));
  position: relative;
  overflow: hidden;
}
.brand-logo::before,
.brand-logo::after {
  content: '';
  position: absolute;
  border-radius: 50%;
}
.brand-logo::before {
  width: 18px;
  height: 18px;
  border: 1px dashed rgba(255,255,255,.55);
  animation: orbit 6s linear infinite;
}
.brand-logo::after {
  width: 5px;
  height: 5px;
  background: #fff;
  box-shadow: 0 0 10px rgba(255,255,255,.9);
  top: 6px;
  left: 18px;
}
.brand-logo .spark {
  font-size: 10px;
  color: #fff;
  transform: translate(-1px, -1px);
}
.brand-wordmark {
  display: inline-flex;
  align-items: baseline;
  gap: 6px;
  font-family: "Cormorant Garamond", "Marcellus", "Times New Roman", serif;
  font-weight: 600;
  font-size: clamp(21px, 2.5vw, 27px);
  letter-spacing: .3px;
}
.brand-wordmark .amp {
  color: color-mix(in srgb, var(--gold) 72%, var(--text));
  font-style: italic;
}
.brand-extra { font-size: 15px; font-family: inherit; color: var(--muted); }
.brand:hover .brand-logo { animation: logoSparkle .8s ease; }

.card {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 28px;
  padding: 18px;
  margin-bottom: 12px;
  box-shadow: var(--shadow);
  backdrop-filter: blur(6px);
  animation: liftIn .45s ease;
}
.reveal-page .card,
.ziwei-report-page .card {
  padding: 32px 24px;
  margin-bottom: 40px;
}
.compact-card { padding: 14px; } 
.tight-grid { gap: 10px; }

h1,h2,h3 {
  margin: 0 0 10px;
  line-height: 1.3;
  font-family: var(--font-body);
  letter-spacing: .2px;
}
p { margin: 0 0 12px; color: var(--muted); }

button,.btn {
  border: 1px solid transparent;
  background: linear-gradient(135deg, var(--primary), var(--primary-2));
  color: #fff;
  min-height: 44px;
  padding: 11px 17px;
  border-radius: 999px;
  font-weight: 700;
  cursor: pointer;
  text-decoration: none;
  display: inline-block;
  transition: transform .2s ease, opacity .2s ease;
}
button:hover,.btn:hover { transform: translateY(-1px); opacity: .95; }

.btn.secondary {
  background: var(--primary-soft);
  color: var(--text);
  border: 1px solid var(--border);
}

.grid { display: grid; gap: 14px; }
.grid.cards { grid-template-columns: repeat(auto-fit, minmax(210px, 1fr)); }

.nav { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 12px; }
.nav a { font-size: 14px; color: var(--primary); text-decoration: none; }

.top-nav {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
  margin: 0 0 14px;
}
.top-nav a,
.bottom-nav a {
  text-decoration: none;
  color: var(--text);
  font-size: 13px;
  border: 1px solid var(--border);
  background: var(--primary-soft);
  padding: 7px 11px;
  border-radius: 999px;
}
.top-nav a.active,
.bottom-nav a.active {
  background: linear-gradient(135deg, var(--primary), var(--primary-2));
  color: #fff;
  border-color: transparent;
}
.bottom-nav {
  position: fixed;
  left: 50%;
  bottom: 14px;
  transform: translateX(-50%);
  display: flex;
  gap: 8px;
  overflow-x: auto;
  width: min(960px, 92%);
  padding: 9px 10px;
  border: 1px solid var(--border);
  border-radius: 999px;
  background: color-mix(in srgb, var(--card) 94%, transparent);
  box-shadow: var(--shadow);
  backdrop-filter: blur(8px);
  z-index: 100;
}

.ziwei-board-wrap {
  position: relative;
  margin: 20px auto;
  width: min(520px, 88vw);
  aspect-ratio: 1 / 1;
}
.ziwei-board {
  width: 100%;
  height: 100%;
  border-radius: 50%;
  border: 2px solid color-mix(in srgb, var(--gold) 80%, transparent);
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  grid-template-rows: repeat(3, 1fr);
  overflow: hidden;
  box-shadow: 0 0 50px rgba(212, 175, 55, 0.22);
  animation: spinBoard 18s linear infinite;
}
.palace {
  border: 1px solid color-mix(in srgb, var(--gold) 45%, var(--border));
  display: grid;
  place-items: center;
  font-weight: 700;
  color: color-mix(in srgb, var(--gold) 72%, var(--text));
  background: linear-gradient(140deg, rgba(87, 40, 143, 0.5), rgba(20, 11, 35, 0.4));
}
.ziwei-core {
  position: absolute;
  inset: 50% auto auto 50%;
  transform: translate(-50%, -50%);
  width: 42%;
  aspect-ratio: 1 / 1;
  border-radius: 50%;
  border: 1px solid color-mix(in srgb, var(--gold) 75%, transparent);
  background: radial-gradient(circle at 35% 20%, rgba(255,255,255,0.5), rgba(110,65,183,0.6));
  display: grid;
  place-items: center;
  font-weight: 800;
}
.character-bubble {
  margin-top: 14px;
  padding: 14px;
  border-radius: 20px;
  border: 1px solid var(--border);
  background: linear-gradient(130deg, rgba(255,255,255,0.5), rgba(255,255,255,0.2));
}

.hanji-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: 12px;
}
.hanji-card {
  border-radius: 18px;
  padding: 16px;
  border: 1px solid rgba(121, 86, 178, 0.24);
  background: linear-gradient(160deg, rgba(250, 242, 224, 0.94), rgba(240, 227, 201, 0.9));
  box-shadow: 0 14px 28px rgba(74, 44, 126, 0.12);
  color: #4a3a2a;
}
[data-theme='dark'] .hanji-card {
  background: linear-gradient(160deg, rgba(91, 75, 56, 0.75), rgba(68, 54, 39, 0.7));
  color: #f9ecd3;
}
.keyword-row { display: flex; gap: 8px; flex-wrap: wrap; margin-top: 8px; }
.keyword { padding: 5px 10px; border-radius: 999px; border: 1px solid rgba(164,116,37,.5); background: rgba(255,236,183,.46); font-size: 12px; }

.popup {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.42);
  display: grid;
  place-items: center;
  z-index: 101;
}
.popup[hidden] { display: none; }
.popup-card {
  width: min(460px, 90vw);
  border-radius: 20px;
  padding: 18px;
  border: 1px solid var(--border);
  background: var(--card);
  box-shadow: var(--shadow);
}

.hero-counseling { border: 1px solid color-mix(in srgb, var(--primary) 35%, var(--border)); }
.cta-row { display:flex; gap:8px; flex-wrap:wrap; margin-top:10px; }
.live-metrics {
  margin-top: 12px;
  display:flex;
  gap:8px;
  flex-wrap:wrap;
}
.live-metrics span {
  font-size: 12px;
  padding: 6px 10px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: var(--primary-soft);
}

.two-track { grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); }
.quick-actions .nav a {
  border: 1px solid var(--border);
  background: var(--primary-soft);
  padding: 8px 12px;
  border-radius: 999px;
}

.flow-row {
  display: grid;
  grid-template-columns: 1fr auto 1fr auto 1fr;
  align-items: stretch;
  gap: 10px;
}
.flow-card { position: relative; min-height: 180px; }
.flow-icon { position: absolute; right: 16px; bottom: 12px; font-size: 28px; opacity: .75; }
.flow-arrow {
  align-self: center;
  font-size: 24px;
  color: var(--gold);
  font-weight: 700;
}

label { display: block; margin: 10px 0 6px; font-weight: 600; }
input, textarea, select {
  width: 100%;
  min-height: 48px;
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 12px 14px;
  background: rgba(255,255,255,.45);
  color: var(--text);
  font-size: 16px;
}
input[type="date"] {
  appearance: none;
  -webkit-appearance: none;
  min-height: 48px;
  line-height: 1.2;
  padding-top: 12px;
  padding-bottom: 12px;
}
input[type="date"]::-webkit-date-and-time-value {
  text-align: left;
}
#birthTime {
  font-size: 15px;
  text-overflow: ellipsis;
}
#birthTime:disabled {
  opacity: .6;
}
.tiny-check {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  margin-top: 8px;
  font-size: 13px;
  font-weight: 500;
}
.tiny-check input {
  width: 18px;
  height: 18px;
  min-height: auto;
  margin: 0;
}

.mode-picker { margin: 8px 0 14px; }
.mode-options { display: flex; gap: 8px; flex-wrap: wrap; }
.mode-btn {
  background: var(--primary-soft);
  color: var(--text);
  border: 1px solid var(--border);
}
.mode-btn.active {
  background: linear-gradient(135deg, var(--primary), var(--primary-2));
  color: #fff;
}
[data-theme='dark'] input,
[data-theme='dark'] textarea,
[data-theme='dark'] select { background: rgba(17, 10, 29, .7); }

.small { font-size: 13px; color: var(--muted); }
.badge {
  display: inline-block;
  padding: 5px 10px;
  border-radius: 999px;
  background: var(--primary-soft);
  color: var(--text);
  font-size: 12px;
  border: 1px solid var(--border);
}
.footer-note { margin-top: 16px; font-size: 13px; color: var(--muted); }

/* TEST */
.progress-wrap { margin: 4px 0 16px; }
.progress-label {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 7px;
  font-size: 14px;
  color: var(--muted);
}
.progress-bar {
  height: 12px;
  background: rgba(255,255,255,.35);
  border: 1px solid var(--border);
  border-radius: 999px;
  overflow: hidden;
}
.progress-fill {
  height: 100%;
  width: 0;
  background: linear-gradient(90deg, var(--gold), var(--primary));
  transition: width .35s ease;
}

.question-card {
  border-radius: 26px;
  border: 1px solid var(--border);
  padding: 18px;
  background: linear-gradient(140deg, rgba(255,255,255,.45), rgba(255,255,255,.15));
}
[data-theme='dark'] .question-card {
  background: linear-gradient(140deg, rgba(191,164,255,.16), rgba(22,14,35,.36));
}
.options { display: grid; gap: 10px; margin-top: 12px; }
.option {
  border: 1px solid var(--border);
  border-radius: 18px;
  padding: 14px 12px;
  min-height: 52px;
  display: flex;
  align-items: center;
  cursor: pointer;
  transition: .2s ease;
  background: rgba(255,255,255,.5);
}

/* Live test mobile density tuning */
.live-focus-page #testForm {
  padding-bottom: calc(env(safe-area-inset-bottom, 0px) + 96px);
}
.live-focus-page .question-card {
  margin-top: 6px;
}
.live-focus-page .options {
  gap: 10px;
  margin-top: 10px;
}
.live-focus-page .option {
  padding: 11px 12px;
  min-height: 42px;
}
.live-focus-page .option input {
  transform: scale(.92);
  margin-right: 7px;
}
.live-focus-page .option[data-score="1"] { background: color-mix(in srgb, #8a7ca8 12%, transparent); }
.live-focus-page .option[data-score="2"] { background: color-mix(in srgb, #8a6db1 18%, transparent); }
.live-focus-page .option[data-score="3"] { background: color-mix(in srgb, #865fc0 24%, transparent); }
.live-focus-page .option[data-score="4"] { background: color-mix(in srgb, #8d4fd0 30%, transparent); }
.live-focus-page .option[data-score="5"] { background: color-mix(in srgb, #9a43df 36%, transparent); }
.live-focus-page .option.selected { box-shadow: 0 0 0 2px rgba(255, 219, 133, .45), 0 6px 16px rgba(156, 86, 225, .22); }
.question-nav-row { display: flex; justify-content: flex-start; margin-top: 10px; }
.question-nav-row .btn { min-height: 36px; padding: 8px 12px; }
.option.selected {
  border-color: var(--gold);
  background: color-mix(in srgb, var(--primary-soft) 80%, #fff);
  box-shadow: 0 0 0 2px color-mix(in srgb, var(--gold) 30%, transparent);
}
[data-theme='dark'] .option { background: rgba(21,12,33,.65); }
.option:hover { transform: translateY(-1px); border-color: var(--gold); }
.option input { width: auto; margin-right: 8px; }
.slide-out { animation: slideOut .25s ease forwards; }
.slide-in { animation: slideIn .3s ease; }

/* AI CHAT */
.chat-panel { display: flex; flex-direction: column; gap: 12px; min-height: 340px; max-height: 54vh; overflow-y: auto; }
.bubble {
  max-width: 82%;
  padding: 12px 14px;
  border-radius: 20px;
  border: 1px solid var(--border);
  animation: liftIn .3s ease;
}
.bubble.user { align-self: flex-end; background: linear-gradient(135deg, var(--primary), var(--primary-2)); color: #fff; }
.bubble.ai { align-self: flex-start; background: rgba(255,255,255,.5); }
[data-theme='dark'] .bubble.ai { background: rgba(23, 13, 38, .7); }
.loading-dots span { display: inline-block; animation: blink 1.2s infinite; }
.loading-dots span:nth-child(2) { animation-delay: .2s; }
.loading-dots span:nth-child(3) { animation-delay: .4s; }
.bubble-more {
  margin-top: 8px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: var(--primary-soft);
  color: var(--text);
  font-size: 12px;
  padding: 6px 10px;
}

/* EXPERT TAROT */
.tarot-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 16px; }
.tarot-card {
  position: relative;
  min-height: 300px;
  border-radius: 24px;
  overflow: hidden;
  border: 1px solid rgba(212,175,55,.45);
  box-shadow: 0 20px 40px rgba(0,0,0,.18);
  transform-style: preserve-3d;
}
.tarot-back {
  position: absolute; inset: 0;
  padding: 18px;
  background: radial-gradient(circle at 30% 20%, rgba(212,175,55,.18), transparent 55%),
              linear-gradient(165deg, #2d1650, #1a0f2d);
  color: #f9f1ff;
  display: flex; flex-direction: column; justify-content: space-between;
  transition: transform .5s ease;
}
.tarot-back::before {
  content: '';
  position: absolute; inset: 12px;
  border: 1px solid rgba(212,175,55,.4);
  border-radius: 16px;
}
.tarot-front {
  position: absolute; inset: 0;
  padding: 18px;
  background: rgba(255,255,255,.96);
  color: #32254a;
  transform: translateY(100%);
  transition: transform .5s ease;
}
[data-theme='dark'] .tarot-front { background: rgba(30,20,46,.95); color: #efe7ff; }
.tarot-card:hover .tarot-back { transform: translateY(-100%); }
.tarot-card:hover .tarot-front { transform: translateY(0); }

/* COMMUNITY */
.feed-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 14px; }
.diary-card {
  border-radius: 24px;
  border: 1px solid var(--border);
  padding: 16px;
  background: linear-gradient(160deg, rgba(255,255,255,.55), rgba(255,255,255,.25));
  box-shadow: var(--shadow);
}
[data-theme='dark'] .diary-card { background: linear-gradient(160deg, rgba(160,126,232,.17), rgba(15,9,25,.56)); }
.empathy { font-size: 14px; color: var(--muted); margin-top: 10px; }
.tags { display: flex; flex-wrap: wrap; gap: 6px; margin-top: 10px; }
.tag {
  font-size: 12px;
  padding: 4px 9px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: var(--primary-soft);
}

.chart-block { margin-top: 14px; }
.mini-bars { display:flex; gap:16px; align-items:flex-end; flex-wrap:wrap; }
.bar-item { min-width: 68px; text-align:center; }
.bar-value { font-weight:700; margin-bottom:6px; color: var(--muted); }
.bar-track {
  height: 120px;
  display:flex;
  align-items:flex-end;
  justify-content:center;
}
.bar-fill {
  width: 42px;
  background: #cfd3da;
  border-radius: 12px;
}
.bar-item.accent .bar-value { color: #e85d87; }
.bar-item.accent .bar-fill { background: #e85d87; }
.bar-label { margin-top: 8px; font-weight: 600; }

.counselor-list { display:grid; gap:10px; }
.counselor-row {
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:10px;
  border:1px solid var(--border);
  border-radius:16px;
  padding:12px;
}

.live-badge {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  font-size: 11px;
  padding: 4px 8px;
  border-radius: 999px;
  border: 1px solid rgba(123, 255, 189, .5);
  background: rgba(57, 173, 115, .2);
  animation: livePulse 1.6s ease-in-out infinite;
}
.status-updated {
  margin: 8px 0 0;
  font-size: 11px;
  color: rgba(249,241,255,.75);
}
.expert-meta {
  margin-top: 8px;
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}
.expert-meta span {
  font-size: 12px;
  border: 1px solid var(--border);
  border-radius: 999px;
  padding: 4px 8px;
  background: rgba(255,255,255,.45);
}
.fixed-notice {
  position: sticky;
  top: 8px;
  z-index: 30;
  border-color: rgba(225, 97, 97, .35);
}
.fixed-notice ul { margin: 0; padding-left: 18px; color: var(--muted); }

.signal-card.t-type { border-color: rgba(92, 136, 241, .4); }
.signal-card.f-type { border-color: rgba(224, 107, 167, .36); }

.lucky-star-card {
  border-color: rgba(255, 205, 104, .55);
  box-shadow: 0 0 0 1px rgba(255,226,162,.45), var(--shadow);
}
.energy-chart {
  height: 130px;
  display: grid;
  grid-template-columns: repeat(12, 1fr);
  gap: 6px;
  align-items: end;
}
.energy-bar {
  display: block;
  border-radius: 10px 10px 4px 4px;
  background: linear-gradient(180deg, #b493ff, #5f3f86);
}
.energy-bar.peak { background: linear-gradient(180deg, #ffd87d, #d4af37); }

.balance-game { margin-top: 14px; }
.balance-options { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }

@keyframes pageFade { from { opacity: 0; } to { opacity: 1; } }
@keyframes liftIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
@keyframes slideOut {
  0% { opacity: 1; transform: translateX(0) scale(1); }
  100% { opacity: 0; transform: translateX(-28px) scale(.985); }
}
@keyframes slideIn {
  0% { opacity: 0; transform: translateX(34px) scale(.985); }
  100% { opacity: 1; transform: translateX(0) scale(1); }
}
@keyframes blink { 0%,80%,100%{opacity:.2;} 40%{opacity:1;} }
@keyframes spinBoard { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

.intake-card { max-width: 760px; margin-left:auto; margin-right:auto; }
.intake-grid { display:grid; gap:10px; grid-template-columns: 1fr; }
.select-like { width:100%; text-align:left; background: rgba(255,255,255,.45); color: var(--text); border:1px solid var(--border); border-radius:16px; }
.full { grid-column: 1 / -1; }
.consent { display:flex; gap:8px; align-items:center; }

.modal {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,.35);
  display: grid;
  place-items: center;
  z-index: 999;
}
.modal[hidden] { display: none; }
.modal-card {
  width: min(520px, 90vw);
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 24px;
  padding: 18px;
  box-shadow: var(--shadow);
  position: relative;
}
.modal-close {
  position: absolute;
  top: 10px;
  right: 10px;
  background: transparent;
  color: var(--text);
  border: none;
}
.onboarding-modal { max-width: 560px; }
.audience-tabs {
  display: inline-flex;
  gap: 6px;
  padding: 4px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: rgba(255,255,255,.05);
  margin: 10px 0 8px;
}
.audience-tabs button {
  border: 0;
  border-radius: 999px;
  padding: 6px 10px;
  background: transparent;
  color: var(--muted);
  cursor: pointer;
  font-size: 12px;
}
.audience-tabs button.active {
  background: linear-gradient(135deg, var(--primary), var(--primary-2));
  color: #fff;
}
.dual-step-nav {
  display: inline-flex;
  gap: 6px;
  padding: 4px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: rgba(255,255,255,.05);
  margin: 8px 0 6px;
}
.dual-step-nav button {
  border: 0;
  border-radius: 999px;
  padding: 6px 10px;
  background: transparent;
  color: var(--muted);
  cursor: pointer;
  font-size: 12px;
}
.dual-step-nav button.active {
  background: linear-gradient(135deg, var(--primary), var(--primary-2));
  color: #fff;
}
.onboarding-chips {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin: 10px 0 8px;
}
.onboarding-chips button {
  padding: 7px 10px;
  border-radius: 999px;
  border: 1px solid rgba(212,175,55,.45);
  background: rgba(255,255,255,.08) !important;
  font-size: 13px;
  color: var(--text) !important;
  min-height: 0;
  cursor: pointer;
  transition: transform .15s ease, box-shadow .2s ease, border-color .2s ease;
}
.onboarding-chips button:active { transform: scale(.98); }
.onboarding-chips button.active {
  background: linear-gradient(135deg, var(--primary), var(--primary-2)) !important;
  color: #fff !important;
  border-color: rgba(255,235,167,.9);
  box-shadow: 0 0 0 1px rgba(255,235,167,.45), 0 0 16px rgba(239,203,100,.25);
}
.concern-grid { display:grid; grid-template-columns: 1fr 1fr; gap:8px; margin: 10px 0 14px; }
.concern-grid-main {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 8px;
  margin: 8px 0 10px;
}
.concern-grid-main button {
  border: 1px solid var(--border);
  background: rgba(255,255,255,.08);
  color: var(--text);
  border-radius: 14px;
  padding: 10px;
  font-size: 14px;
  cursor: pointer;
}
.concern-grid-main button.active {
  background: linear-gradient(135deg, var(--primary), var(--primary-2));
  color: #fff;
  border-color: rgba(255,235,167,.9);
}
.sub-concern-wrap { margin: 8px 0 6px; }
.sub-concern-wrap[hidden] { display: none; }
.home-hero-banner {
  position: relative;
  overflow: hidden;
  border: 1px solid var(--border);
  background:
    radial-gradient(circle at 75% 18%, rgba(222,74,63,.28), transparent 38%),
    radial-gradient(circle at 20% 72%, rgba(120,84,215,.22), transparent 42%),
    linear-gradient(140deg, rgba(19,13,36,.96), rgba(41,22,74,.92));
  animation: heroFloat 8s ease-in-out infinite;
}
.hero-glow {
  position: absolute;
  width: 180px;
  height: 180px;
  right: -36px;
  top: -56px;
  border-radius: 50%;
  background: radial-gradient(circle, rgba(227,92,65,.45), rgba(227,92,65,0));
  filter: blur(6px);
  pointer-events: none;
}
.home-hero-banner h2 {
  margin: 6px 0 10px;
  line-height: 1.3;
  font-size: clamp(24px, 6vw, 32px);
  animation: fadeUp .55s ease both;
}
.home-hero-banner p { animation: fadeUp .7s ease both; }
.hero-eyebrow {
  font-size: 12px;
  letter-spacing: .08em;
  text-transform: uppercase;
  color: rgba(255,255,255,.75);
}
.hero-cta {
  min-height: 50px;
  padding: 12px 16px;
  font-weight: 700;
  background: linear-gradient(135deg, #f6d37a, #f0ac4f);
  color: #2a1844;
  border: 1px solid rgba(255,255,255,.55);
}
@keyframes fadeUp {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}
@keyframes heroFloat {
  0%,100% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
}
.adult-entry-card {
  margin-top: 8px;
  border: 1px solid rgba(230, 112, 132, .45);
  background: linear-gradient(140deg, rgba(63,18,47,.32), rgba(34,14,42,.28));
  border-radius: 14px;
  padding: 10px;
}
.home-bottom-nav {
  position: fixed;
  left: 50%;
  bottom: 14px;
  transform: translateX(-50%);
  z-index: 80;
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 6px;
  width: min(560px, calc(100% - 20px));
  padding: 6px;
  border-radius: 16px;
  border: 1px solid var(--border);
  background: color-mix(in srgb, var(--card) 90%, #0e0a1a);
  box-shadow: var(--shadow);
}
.home-bottom-nav a {
  text-decoration: none;
  color: var(--text);
  text-align: center;
  padding: 8px 6px;
  border-radius: 10px;
  border: 1px solid transparent;
  font-size: 13px;
}
.home-bottom-nav a:hover { border-color: var(--border); }
.first-impact-page { padding-bottom: 90px; }
.concern-item { background: var(--primary-soft); color: var(--text); border:1px solid var(--border); }
.concern-item.active { background: linear-gradient(135deg, var(--primary), var(--primary-2)); color:#fff; }

@media (max-width: 768px) {
  .flow-row { grid-template-columns: 1fr; }
  .flow-arrow { display: none; }
  .fortune-card-section { grid-template-columns: 1fr; }
}

@media (max-width: 640px) {
  .container { padding-top: 16px; }
  .card { padding: 16px; border-radius: 24px; }
  .bubble { max-width: 92%; }
  .bottom-nav { bottom: 10px; width: 94%; }
  .ziwei-board-wrap { width: min(520px, 96vw); }
  .ziwei-core { width: 46%; }
  .ribbon-head { grid-template-columns: 1fr; }
  .ribbon-head .btn { width: 100%; }
  .perspective-grid { grid-template-columns: 1fr 1fr; }
  .tarot-layout { grid-template-columns: 1fr; }
  .fortune-card-section { grid-template-columns: 1fr; }
  .coach-bubbles { min-height: 150px; max-height: 220px; }
  .fortune-card-grid { grid-template-columns: repeat(3, minmax(0, 1fr)); }
  .card-sfx-toggle { position: static; margin-bottom: 8px; }
  .balance-options { grid-template-columns: 1fr; }
}

button,.btn,.option,.select-like,.concern-item { border-radius: 24px; }

.hero-claim {
  position: relative;
  overflow: hidden;
  border-radius: 28px;
  background: linear-gradient(135deg, color-mix(in srgb, var(--primary) 92%, #000 8%), color-mix(in srgb, var(--primary-2) 82%, #fff 18%));
  color: #fff;
  border: 1px solid rgba(255,255,255,.22);
}
.hero-claim p { color: rgba(255,255,255,.92); margin: 0; font-weight: 600; }
.hero-main-slogan { font-size: clamp(22px, 3.4vw, 34px); line-height: 1.35; margin-bottom: 8px; }
.hero-sub-slogan { font-size: clamp(14px, 2vw, 17px); opacity: .92; }
.sub-copy { margin-top: 8px; }
.hero-claim::after {
  content: '';
  position: absolute;
  inset: 0;
  pointer-events: none;
  background:
    radial-gradient(2px 2px at 12% 24%, rgba(255,255,255,.6), transparent 60%),
    radial-gradient(2px 2px at 82% 32%, rgba(255,255,255,.55), transparent 60%),
    radial-gradient(1.5px 1.5px at 58% 75%, rgba(255,255,255,.5), transparent 60%),
    radial-gradient(220px 120px at 80% -10%, rgba(255,255,255,.16), transparent 70%);
}

.card.patterned {
  position: relative;
  overflow: hidden;
}
.card.patterned::before {
  content: '';
  position: absolute;
  inset: 0;
  pointer-events: none;
  background: linear-gradient(120deg, rgba(255,255,255,.14), transparent 40%);
}

.slide-out { animation: slideOut .36s cubic-bezier(.4,0,.2,1) forwards; }
.slide-in { animation: slideIn .42s cubic-bezier(.22,.61,.36,1); }

.result-overlay {
  position: fixed;
  inset: 0;
  background: rgba(17,10,29,.62);
  display: grid;
  place-items: center;
  z-index: 999;
}
.result-overlay[hidden] { display: none; }
.overlay-card {
  width: min(430px, 88vw);
  border-radius: 28px;
  border: 1px solid rgba(255,255,255,.18);
  background: linear-gradient(165deg, rgba(45,27,75,.95), rgba(25,15,41,.96));
  color: #f5ebff;
  text-align: center;
  padding: 24px;
}
.shuffle-row { margin-top: 14px; display: flex; justify-content: center; gap: 12px; }
.shuffle-icon { font-size: 22px; animation: shuffleUp 1.2s ease-in-out infinite; }
.shuffle-icon:nth-child(2) { animation-delay: .18s; }
.shuffle-icon:nth-child(3) { animation-delay: .36s; }

.ziwei-board-wrap::before,
.ziwei-board-wrap::after {
  content: '';
  position: absolute;
  inset: -4%;
  border-radius: 50%;
  border: 1px dashed color-mix(in srgb, var(--gold) 62%, transparent);
  animation: orbit 14s linear infinite;
}

.ribbon-wrap { padding: 0; overflow: hidden; }
.ribbon-head {
  display: grid;
  grid-template-columns: auto 1fr auto;
  gap: 10px;
  align-items: center;
  padding: 12px 14px;
  background: linear-gradient(90deg, #2d1b4b, #5f3f86);
  color: #fff;
}
.ribbon-head h3 { margin: 0; font-size: 20px; }
.ribbon-tag {
  font-size: 12px;
  padding: 4px 8px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.4);
}
.content-strip {
  display: grid;
  grid-auto-flow: column;
  grid-auto-columns: minmax(180px, 1fr);
  gap: 12px;
  overflow-x: auto;
  padding: 14px;
}
.mini-content-card {
  border: 1px solid var(--border);
  border-radius: 18px;
  padding: 10px;
  background: var(--card);
}
.mini-content-card h4 { margin: 6px 0; font-size: 15px; }
.mini-content-card p { margin: 0; font-size: 12px; }
.viral-cta {
  margin-top: 10px;
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}
.viral-cta .btn,
.viral-cta button {
  font-size: 12px;
  padding: 8px 12px;
}
.mini-thumb {
  height: 84px;
  border-radius: 14px;
}
.mini-thumb.purple { background: radial-gradient(circle at 30% 20%, #b493ff, #2d1b4b); }
.mini-thumb.beige { background: linear-gradient(135deg, #efe3d0, #d8c3a5); }
.ziwei-board-wrap::after {
  inset: 8%;
  animation-direction: reverse;
  animation-duration: 10s;
}
.orbit-dot {
  position: absolute;
  width: 10px; height: 10px;
  border-radius: 50%;
  background: rgba(255,233,178,.88);
  box-shadow: 0 0 10px rgba(255,214,117,.78);
  animation: orbitDot 8s linear infinite;
}
.orbit-dot.dot-2 { animation-duration: 11s; animation-direction: reverse; }

.philosophy-hero {
  background:
    linear-gradient(155deg, rgba(250,242,224,.96), rgba(235,222,194,.92)),
    repeating-linear-gradient(12deg, rgba(73,54,33,.05) 0 2px, transparent 2px 6px);
  border-radius: 28px;
}
.philosophy-hero::after {
  content: '';
  display: block;
  height: 44px;
  margin-top: 8px;
  background: linear-gradient(90deg, rgba(44,30,16,.22), transparent 28%, rgba(44,30,16,.17) 60%, transparent);
  border-radius: 999px;
  opacity: .55;
}
.keyword { font-weight: 700; color: #5a401f; background: rgba(255,240,204,.9); }

.perspective-hub h1 { font-size: clamp(22px, 3vw, 32px); }
.perspective-grid {
  margin-top: 12px;
  display: grid;
  gap: 10px;
  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
}
.perspective-chip {
  text-decoration: none;
  color: #fff;
  border-radius: 18px;
  padding: 14px;
  font-weight: 700;
  text-align: center;
  box-shadow: 0 10px 24px rgba(33, 18, 56, .2);
}
.perspective-chip.saju { background: linear-gradient(130deg, #8e5b2a, #c69552); }
.perspective-chip.tarot { background: linear-gradient(130deg, #3f215a, #7c4ab2); }
.perspective-chip.astro { background: linear-gradient(130deg, #1c2f6f, #3d75e7); }
.perspective-chip.mbti { background: linear-gradient(130deg, #0d5560, #20a9a3); }
.perspective-chip.ziwei { background: linear-gradient(130deg, #5f3f86, #9f7adc); }
.perspective-chip.philosophy { background: linear-gradient(130deg, #7a5932, #b58754); }
.muted-intake { opacity: .92; }

.saju-hero {
  background: linear-gradient(160deg, rgba(245,236,217,.95), rgba(231,214,182,.92));
  border-color: rgba(129, 97, 58, .35);
}
.saju-panel {
  background: linear-gradient(160deg, rgba(249, 242, 227, .95), rgba(241, 228, 199, .86));
  border-color: rgba(136, 102, 54, .28);
}
.saju-flow { display: flex; gap: 8px; flex-wrap: wrap; }
.saju-flow span {
  border: 1px solid rgba(129,97,58,.4);
  background: rgba(255,244,213,.86);
  color: #6c4b22;
  border-radius: 999px;
  padding: 5px 10px;
  font-size: 12px;
}
.hanji-note {
  background: repeating-linear-gradient(0deg, rgba(95,65,27,.06) 0 2px, transparent 2px 4px);
  border-radius: 12px;
  padding: 10px;
  color: #674a2a;
}

.tarot-hero { background: linear-gradient(130deg, rgba(58, 28, 84, .95), rgba(104, 52, 143, .86)); }
.tarot-hero h1, .tarot-hero p { color: #f8ecff; }
.tarot-layout {
  display: grid;
  gap: 10px;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
}
.deck-card {
  min-height: 180px;
  border-radius: 16px;
  display: grid;
  place-items: center;
  font-weight: 800;
  letter-spacing: .5px;
  margin-bottom: 10px;
  border: 1px solid rgba(212,175,55,.5);
}
.deck-card.major { background: radial-gradient(circle at 30% 20%, #5f3f86, #241338); color: #fff; }
.deck-card.relation { background: radial-gradient(circle at 30% 20%, #7a3d72, #2a1530); color: #fff; }
.deck-card.action { background: radial-gradient(circle at 30% 20%, #5f5b9f, #1f2243); color: #fff; }

.fortune-card-section {
  position: relative;
  display: grid;
  grid-template-columns: minmax(0, 1fr) minmax(260px, 330px);
  gap: 14px;
  align-items: start;
  margin-bottom: 14px;
}
.card-sfx-toggle {
  position: absolute;
  top: -52px;
  right: 0;
  font-size: 12px;
  padding: 8px 12px;
}
.fortune-card-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
  gap: 12px;
}
.fortune-card {
  border: 0;
  padding: 0;
  background: transparent;
  text-align: left;
  cursor: pointer;
  perspective: 1200px;
  min-width: 0;
}
.fortune-card-inner {
  position: relative;
  display: block;
  width: 100%;
  aspect-ratio: 1 / 1.7;
  border-radius: 14px;
  transform-style: preserve-3d;
  transition: transform .65s cubic-bezier(.22,.61,.36,1), filter .25s ease;
  box-shadow: 0 16px 30px rgba(10, 6, 18, 0.3);
}
.fortune-card:hover .fortune-card-inner,
.fortune-card:focus-visible .fortune-card-inner,
.fortune-card.flipped .fortune-card-inner {
  transform: translateY(-8px);
  filter: drop-shadow(0 0 16px rgba(184, 136, 255, 0.45));
}
.fortune-card.flipped .fortune-card-inner { transform: rotateY(180deg) translateY(-6px); animation: cardPaperFlip .7s ease; }
.card-face {
  position: absolute;
  inset: 0;
  border-radius: 14px;
  padding: 14px;
  border: 1px solid rgba(212,175,55,.38);
  backface-visibility: hidden;
  overflow: hidden;
}
.card-back {
  background:
    radial-gradient(circle at 20% 16%, rgba(255,255,255,.24), transparent 44%),
    repeating-linear-gradient(45deg, rgba(255,255,255,.05) 0 2px, transparent 2px 12px),
    repeating-linear-gradient(0deg, rgba(235,220,188,.08) 0 1px, transparent 1px 4px),
    linear-gradient(165deg, #1b1431, #33235b 42%, #120b24);
}
.card-back::after {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: 14px;
  pointer-events: none;
  background: radial-gradient(circle at 65% 30%, rgba(245,226,194,.12), transparent 38%);
  mix-blend-mode: screen;
}
.card-back::before {
  content: '';
  position: absolute;
  inset: 10px;
  border-radius: 10px;
  border: 1px solid rgba(212,175,55,.42);
  background:
    radial-gradient(2px 2px at 20% 20%, rgba(255,255,255,.62), transparent 60%),
    radial-gradient(2px 2px at 74% 28%, rgba(255,255,255,.5), transparent 60%),
    radial-gradient(2px 2px at 40% 80%, rgba(255,255,255,.55), transparent 60%);
}
.card-front {
  transform: rotateY(180deg);
  display: flex;
  flex-direction: column;
  justify-content: end;
  gap: 8px;
  color: #fff;
  background:
    radial-gradient(120px 80px at 70% 20%, rgba(255,255,255,.16), transparent 60%),
    repeating-linear-gradient(45deg, rgba(255,255,255,.04) 0 1px, transparent 1px 3px),
    linear-gradient(160deg, #3c245f, #1c102f);
}
.card-front::before {
  content: '';
  position: absolute;
  inset: 10px;
  border-radius: 10px;
  border: 1px solid rgba(255,255,255,.24);
  pointer-events: none;
}
.card-front strong { font-size: 19px; letter-spacing: .2px; text-rendering: geometricPrecision; }
.card-front small { opacity: .95; line-height: 1.4; text-rendering: geometricPrecision; }

.fortune-card-section[data-card-theme='ziwei'] .card-back {
  background:
    radial-gradient(circle at 30% 12%, rgba(189,153,255,.35), transparent 42%),
    linear-gradient(145deg, #29134d, #3f1e68 48%, #1a102f);
}
.fortune-card-section[data-card-theme='ziwei'] .card-back::before {
  border-color: rgba(193,164,255,.5);
  background:
    linear-gradient(35deg, transparent 48%, rgba(196,168,255,.45) 49% 51%, transparent 52%),
    linear-gradient(-35deg, transparent 48%, rgba(196,168,255,.4) 49% 51%, transparent 52%),
    radial-gradient(2px 2px at 20% 20%, rgba(255,255,255,.55), transparent 60%),
    radial-gradient(2px 2px at 74% 28%, rgba(255,255,255,.5), transparent 60%);
}
.fortune-card-section[data-card-theme='ziwei'] .card-front { background: linear-gradient(160deg, #4b1b78, #1f1234); }

.fortune-card-section[data-card-theme='philosophy'] .card-back {
  background:
    repeating-linear-gradient(0deg, rgba(102,71,33,.08) 0 2px, transparent 2px 6px),
    linear-gradient(155deg, #f1ddbc, #e6cfa8 45%, #d9bf91);
}
.fortune-card-section[data-card-theme='philosophy'] .card-back::before {
  border-color: rgba(124,84,37,.38);
  background:
    linear-gradient(125deg, transparent 0 35%, rgba(78,56,30,.13) 36% 40%, transparent 41%),
    radial-gradient(100px 40px at 50% 105%, rgba(93,66,34,.16), transparent 70%);
}
.fortune-card-section[data-card-theme='philosophy'] .card-front {
  color: #fef7e7;
  background: linear-gradient(165deg, #8b6032, #5f3e21 52%, #3f2b1a);
}

.coach-panel {
  border: 1px solid var(--border);
  border-radius: 18px;
  padding: 12px;
  background: linear-gradient(145deg, rgba(255,255,255,.34), rgba(255,255,255,.12));
}
.coach-panel h3 { margin: 0 0 8px; display: flex; align-items: center; justify-content: space-between; }
.coach-expression {
  font-size: 20px;
  margin-left: 8px;
  transition: transform .2s ease;
}
.coach-expression.typing { animation: moodBounce .45s ease-in-out infinite alternate; }
.coach-expression.done { transform: scale(1.16); }
.coach-bubbles {
  display: flex;
  flex-direction: column;
  gap: 8px;
  min-height: 220px;
  max-height: 420px;
  overflow: auto;
}
.bubble.typing::after {
  content: 'â–‹';
  animation: blink 1s infinite;
  margin-left: 2px;
}

.astro-hero { background: linear-gradient(130deg, rgba(21,34,84,.92), rgba(33,82,169,.85)); }
.astro-hero h1, .astro-hero p { color: #eff4ff; }
.astro-orbit {
  position: relative;
  width: min(460px, 88vw);
  aspect-ratio: 1 / 1;
  margin: 0 auto;
  border-radius: 50%;
  background: radial-gradient(circle, rgba(38,54,115,.38), rgba(10,16,38,.2));
}
.orbit {
  position: absolute;
  inset: 12%;
  border: 1px solid rgba(179,208,255,.42);
  border-radius: 50%;
}
.orbit.ring-2 { inset: 24%; border-style: dashed; }
.planet {
  position: absolute;
  width: 34px;
  height: 34px;
  border-radius: 50%;
  display: grid;
  place-items: center;
  background: rgba(242,248,255,.9);
  color: #22346f;
  font-weight: 700;
}
.p1 { top: 8%; left: 50%; transform: translateX(-50%); }
.p2 { right: 18%; bottom: 18%; }
.p3 { left: 18%; bottom: 20%; }
.center-sign {
  position: absolute;
  inset: 50% auto auto 50%;
  transform: translate(-50%, -50%);
  width: 84px;
  height: 84px;
  border-radius: 50%;
  display: grid;
  place-items: center;
  font-size: 32px;
  background: rgba(255,255,255,.88);
  color: #24387b;
  border: 1px solid rgba(150,186,255,.6);
}

.mbti-hero { background: linear-gradient(130deg, rgba(14,83,93,.93), rgba(20,141,133,.84)); }
.mbti-hero h1, .mbti-hero p { color: #e8fffb; }
.mbti-matrix {
  display: grid;
  grid-template-columns: 120px 1fr 1fr;
  gap: 1px;
  border: 1px solid var(--border);
  border-radius: 14px;
  overflow: hidden;
}
.mbti-matrix .cell {
  background: rgba(255,255,255,.52);
  padding: 10px;
  font-size: 14px;
}
[data-theme='dark'] .mbti-matrix .cell { background: rgba(18,30,42,.68); }
.mbti-matrix .cell.head { font-weight: 700; background: rgba(131,199,193,.35); }
.convo-card.soft { border-color: rgba(84,167,163,.45); }
.convo-card.strong { border-color: rgba(100,126,215,.45); }
.convo-card.mix { border-color: rgba(130,98,194,.45); }

@keyframes shuffleUp {
  0%,100% { transform: translateY(0) rotate(0); opacity: .68; }
  50% { transform: translateY(-10px) rotate(8deg); opacity: 1; }
}
@keyframes orbit { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
@keyframes orbitDot {
  from { transform: rotate(0deg) translateX(230px) rotate(0deg); }
  to { transform: rotate(360deg) translateX(230px) rotate(-360deg); }
}
@keyframes cardPaperFlip {
  0% { filter: saturate(1); }
  45% { filter: saturate(1.15) brightness(1.08); }
  100% { filter: saturate(1); }
}
@keyframes moodBounce {
  from { transform: translateY(0) scale(1); }
  to { transform: translateY(-2px) scale(1.08); }
}
@keyframes livePulse {
  0%, 100% { box-shadow: 0 0 0 0 rgba(107, 248, 171, .15); }
  50% { box-shadow: 0 0 0 6px rgba(107, 248, 171, .02); }
}
@keyframes logoSparkle {
  0% { transform: scale(1); filter: brightness(1); }
  40% { transform: scale(1.07); filter: brightness(1.25); }
  100% { transform: scale(1); filter: brightness(1); }
}

.ff-toast {
  position: fixed;
  left: 50%;
  bottom: 88px;
  transform: translateX(-50%) translateY(12px);
  border-radius: 999px;
  border: 1px solid var(--border);
  background: color-mix(in srgb, var(--card) 92%, var(--primary-soft));
  color: var(--text);
  padding: 10px 14px;
  font-size: 13px;
  box-shadow: var(--shadow);
  opacity: 0;
  pointer-events: none;
  transition: opacity .2s ease, transform .2s ease;
  z-index: 1000;
}
.ff-toast.show {
  opacity: 1;
  transform: translateX(-50%) translateY(0);
}

:root { --radius-md: 20px; }
.card,
.popup-card,
.modal-card,
.diary-card,
.counselor-row,
.coach-panel,
.mini-content-card,
.question-card,
.option,
.card-face,
.deck-card,
input,
textarea,
select,
.select-like,
.concern-item,
.top-nav a,
.bottom-nav a,
.badge,
.tag,
.keyword,
.live-badge,
.hanji-card,
.bubble,
.tarot-card,
.tarot-back::before,
.mini-thumb,
.bar-fill,
.mbti-matrix,
.fortune-card-inner,
.card-back::before,
.card-front::before,
.center-sign,
.convo-card,
.expert-meta span { border-radius: var(--radius-md); }

.intake-step { border: none; padding: 0; margin: 0; display: none; }
.intake-step.active { display: block; }
.intake-step legend { font-size: 14px; color: var(--muted); margin-bottom: 6px; }
.step-progress {
  display: flex; align-items: center; gap: 8px;
  padding: 10px 14px; border-radius: 999px;
  background: rgba(255,255,255,.18); border: 1px solid var(--border);
}
.step-dot {
  width: 28px; height: 28px; border-radius: 50%; display: grid; place-items: center;
  border: 1px solid var(--border); color: var(--muted); font-size: 13px;
}
.step-dot.active { background: linear-gradient(135deg, var(--primary), var(--primary-2)); color: #fff; border-color: transparent; }
.step-line { width: 18px; height: 1px; background: var(--border); }
.step-actions { display: flex; gap: 8px; justify-content: flex-end; }
.intake-review { background: rgba(255,255,255,.3); }
.field-help {
  display: inline-flex; position: relative; margin-left: 6px; font-size: 12px;
  width: 18px; height: 18px; border-radius: 50%; align-items: center; justify-content: center;
  border: 1px solid var(--border); cursor: help;
}
.tooltip {
  position: absolute; left: 24px; top: -4px; width: 240px; padding: 8px 10px;
  border-radius: 14px; background: #1d1734; color: #fff; font-size: 12px; line-height: 1.45;
  opacity: 0; transform: translateY(4px); pointer-events: none; transition: .2s ease; z-index: 20;
}
.field-help:hover .tooltip,
.field-help:focus .tooltip { opacity: 1; transform: translateY(0); }

.fortune-card-section { display: block; }
.fortune-card-grid {
  display: grid; grid-auto-flow: column; grid-auto-columns: minmax(170px, 240px);
  gap: 14px; overflow-x: auto; padding: 8px 6px 18px; scroll-snap-type: x mandatory;
}
.fortune-card { scroll-snap-align: center; transition: transform .3s ease, filter .3s ease; }
.fortune-card.is-focus { transform: scale(1.06); filter: drop-shadow(0 0 16px rgba(206, 165, 255, .45)); }
.fortune-card-inner, .card-face { border-radius: 22px; }

.result-summary-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 10px; margin: 8px 0 12px; }
.metric-chip { border: 1px solid var(--border); background: rgba(255,255,255,.35); padding: 10px; border-radius: 20px; }
.metric-chip strong { display: block; }
.timeline-card { border: 1px solid var(--border); }
.quick-share-card { border: 1px solid var(--border); }
.fortune-score-head { margin: 10px 0 6px; font-size: 16px; }
.fortune-score-head strong { color: var(--gold); font-size: 20px; }
.weather-hero.hero-compat { background: linear-gradient(135deg, rgba(177,65,111,.2), rgba(93,53,170,.22)); }
.weather-hero.hero-marriage { background: linear-gradient(135deg, rgba(207,122,156,.18), rgba(121,74,164,.22)); }
.weather-hero.hero-money { background: linear-gradient(135deg, rgba(230,178,71,.2), rgba(78,52,130,.2)); }
.weather-hero.hero-career { background: linear-gradient(135deg, rgba(86,131,220,.22), rgba(58,87,156,.2)); }
.weather-hero.hero-adult { background: linear-gradient(135deg, rgba(153,48,77,.26), rgba(74,20,64,.24)); }
.weather-hero.hero-love { background: linear-gradient(135deg, rgba(203,84,132,.24), rgba(105,59,168,.22)); }
.fortune-score-bar { width: 100%; height: 10px; border-radius: 999px; background: rgba(255,255,255,.18); overflow: hidden; margin-bottom: 12px; }
.fortune-score-bar span { display: block; height: 100%; background: linear-gradient(90deg, #f4cd72, #e98f45); }
.hero-chip-row {
  display: flex;
  gap: 10px;
  row-gap: 8px;
  flex-wrap: wrap;
  justify-content: center;
  margin-top: 8px;
  margin-bottom: 12px;
}
.hero-chip { padding: 6px 12px; border-radius: 999px; border: 1px solid rgba(244,205,114,.45); background: rgba(244,205,114,.13); font-size: 12px; }
.timeline-summary { margin: 6px 0 10px; color: var(--muted); font-size: 13px; }
.timeline-tabs { display: flex; gap: 6px; padding: 4px; border-radius: 999px; border: 1px solid var(--border); background: rgba(255,255,255,.05); margin-bottom: 10px; position: sticky; top: 8px; z-index: 4; }
.timeline-tabs button { flex: 1; border: 0; border-radius: 999px; padding: 7px 10px; background: rgba(255,255,255,.08); color: var(--muted); cursor: pointer; font-size: 12px; opacity: .62; }
.timeline-tabs button.active { background: linear-gradient(135deg, #e8c46f, #dba54b); color: #1f1235; font-weight: 700; opacity: 1; }
.timeline-hash { font-weight: 700; margin: 6px 0 8px; }
.monthly-bars { display: grid; grid-template-columns: repeat(12, minmax(0, 1fr)); gap: 6px; align-items: end; height: 120px; margin: 10px 0 8px; }
.monthly-bars .mbar { display: grid; gap: 4px; justify-items: center; align-content: end; }
.monthly-bars .mbar span {
  display: block;
  width: 100%;
  border-radius: 8px;
  background: linear-gradient(180deg, rgba(242,208,122,.95), rgba(128,84,218,.95));
  min-height: 10px;
  transform-origin: bottom;
  animation: barGrow .45s ease both;
  animation-delay: calc(var(--i, 0) * 35ms);
}
.monthly-bars .mbar em { font-style: normal; font-size: 10px; color: var(--muted); }
@keyframes barGrow {
  from { transform: scaleY(0.1); opacity: .35; }
  to { transform: scaleY(1); opacity: 1; }
}
.timeline-panel.fade-in { animation: slideInX .28s ease; }
.timeline-panel.tone-past { background: linear-gradient(165deg, rgba(85,109,163,.16), rgba(79,96,132,.08)); padding: 10px; border-radius: 14px; }
.timeline-panel.tone-now { background: linear-gradient(165deg, rgba(238,172,82,.14), rgba(161,86,41,.08)); padding: 10px; border-radius: 14px; }
.timeline-panel.tone-future { background: linear-gradient(165deg, rgba(96,164,124,.14), rgba(52,101,87,.08)); padding: 10px; border-radius: 14px; }
.timeline-tip { margin-top: 6px; }
.grade-card, .social-share-card { border: 1px solid var(--border); }
/* grade card override removed */
.grade-emblem {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  border-radius: 999px;
  padding: 8px 12px;
  border: 1px solid color-mix(in srgb, var(--grade-color) 65%, #fff);
  background: color-mix(in srgb, var(--grade-color) 20%, transparent);
}
.grade-emblem strong { font-size: 22px; color: var(--grade-color); }
.grade-label { margin: 8px 0 4px; }
.grade-tip-inline {
  margin-top: 8px;
  color: #cfd3df;
}
.five-elements-card { border: 1px solid var(--border); }
.five-wrap {
  display: grid;
  place-items: center;
  margin: 8px 0;
  padding: 12px;
  border-radius: 18px;
  background: radial-gradient(circle, #3a2b5a 0%, #1a152d 100%);
  box-shadow: inset 0 0 28px rgba(132, 110, 196, .22), 0 12px 26px rgba(8, 8, 18, .35);
}
.five-radar {
  width: min(280px, 92%);
  height: auto;
  animation: radarFadeIn .7s ease both;
}
.radar-grid { fill: none; stroke: rgba(129, 230, 217, 0.3); stroke-width: 1; }
.radar-self {
  fill: rgba(147, 197, 253, .22);
  stroke: rgba(147, 197, 253, .95);
  stroke-width: 2.1;
  filter: drop-shadow(0 0 10px rgba(147,197,253,.55));
  transform-origin: 110px 110px;
  animation: radarGrow .7s ease both;
}
.radar-partner {
  fill: rgba(244, 114, 182, .20);
  stroke: rgba(244, 114, 182, .88);
  stroke-dasharray: 5 4;
  stroke-width: 1.9;
  filter: drop-shadow(0 0 10px rgba(244,114,182,.45));
  transform-origin: 110px 110px;
  animation: radarGrow .7s ease .1s both;
}
.radar-point { animation: radarPointPop .45s ease both, starPulse 2.2s ease-in-out infinite; }
.radar-point.partner { opacity: .85; }
.radar-point.wood { fill: #4ADE80; filter: drop-shadow(0 0 7px rgba(74,222,128,.9)); }
.radar-point.fire { fill: #FB7185; filter: drop-shadow(0 0 7px rgba(251,113,133,.9)); }
.radar-point.earth { fill: #FDE047; filter: drop-shadow(0 0 7px rgba(253,224,71,.9)); }
.radar-point.metal { fill: #F8FAFC; filter: drop-shadow(0 0 7px rgba(248,250,252,.9)); }
.radar-point.water { fill: #38BDF8; filter: drop-shadow(0 0 7px rgba(56,189,248,.9)); }
.radar-axis-label {
  font-size: 13px;
  font-weight: 700;
  font-family: var(--font-serif);
  paint-order: stroke;
  stroke: rgba(10,11,20,.88);
  stroke-width: 2.4px;
  letter-spacing: .02em;
}
.radar-axis-label.wood,
.radar-axis-label.fire,
.radar-axis-label.earth,
.radar-axis-label.metal,
.radar-axis-label.water { fill: #f6d783; }
.five-legend { margin-top: 6px; font-size: 13px; color: #cfd3df; }
.dot { display: inline-block; width: 9px; height: 9px; border-radius: 2px; margin: 0 4px 0 8px; }
.dot.self { background: rgba(74,222,128,.95); }
.dot.partner { background: rgba(248,250,252,.92); }
.five-line { margin-top: 6px; }
@keyframes radarGrow {
  from { transform: scale(.2); opacity: .2; }
  to { transform: scale(1); opacity: 1; }
}
@keyframes radarFadeIn {
  from { opacity: 0; transform: scale(.94); }
  to { opacity: 1; transform: scale(1); }
}
@keyframes radarPointPop {
  from { transform: scale(.4); opacity: 0; }
  to { transform: scale(1); opacity: 1; }
}
@keyframes starPulse {
  0%, 100% { filter: drop-shadow(0 0 5px rgba(255,255,255,.65)); }
  50% { filter: drop-shadow(0 0 12px rgba(255,255,255,.95)); }
}
.lucky-guide-card { border: 1px solid var(--border); }
.lucky-grid { display: grid; grid-template-columns: repeat(2, minmax(0, 1fr)); gap: 8px; margin-top: 8px; }
.lucky-item { border: 1px solid var(--border); border-radius: 14px; padding: 10px; background: rgba(255,255,255,.08); }
.lucky-item h4 { margin: 0 0 6px; font-size: 13px; color: var(--muted); }
.lucky-color { margin-top: 8px; }
.lucky-guide-card { border: 0; }
.lucky-commerce-slider {
  display: grid;
  grid-auto-flow: column;
  grid-auto-columns: minmax(260px, 80%);
  gap: 12px;
  overflow-x: auto;
  padding: 4px 2px 8px;
  scroll-snap-type: x mandatory;
}
.lucky-slide-card {
  position: relative;
  border-radius: 16px;
  overflow: hidden;
  min-height: 260px;
  scroll-snap-align: start;
  box-shadow: 0 0 22px rgba(138, 112, 210, .18);
  animation: luckyStagger .5s ease both;
}
.lucky-slide-card img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}
.slide-overlay {
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0;
  padding: 12px;
  background: linear-gradient(180deg, rgba(10,10,20,.04), rgba(10,10,20,.82));
}
.slide-overlay strong { display: block; margin: 4px 0; color: #f7f9ff; }
.slide-overlay p { margin: 0 0 8px; color: #dde2f0; font-size: 13px; line-height: 1.55; }
.lucky-cta-btn {
  display: inline-flex;
  text-decoration: none;
  border-radius: 999px;
  padding: 9px 13px;
  font-weight: 700;
  color: #241400;
  background: linear-gradient(135deg, #f3d37a, #d7a53d, #8e6dff);
  box-shadow: 0 0 14px rgba(243,211,122,.45);
  transition: transform .2s ease;
}
.lucky-cta-btn:hover { transform: translateY(-1px); }
.lucky-cta-btn.alt { color: #161a24; background: linear-gradient(135deg, #d9deec, #bfc7df, #9f8de0); }
.lucky-footer-row {
  margin-top: 10px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
}
.lucky-color-badge {
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.16);
  padding: 7px 12px;
  background: rgba(255,255,255,.05);
  color: #e6ebf7;
  font-size: 12px;
}
.lucky-branding {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  color: #b9c2da;
}
.lucky-branding img { width: 44px; height: 44px; border-radius: 8px; border: 1px solid rgba(255,255,255,.18); }
.lucky-branding small { font-size: 11px; }
.lucky-commerce-slider.wood .lucky-slide-card { box-shadow: 0 0 22px rgba(74,222,128,.22); }
.lucky-commerce-slider.fire .lucky-slide-card { box-shadow: 0 0 22px rgba(251,113,133,.22); }
.lucky-commerce-slider.earth .lucky-slide-card { box-shadow: 0 0 22px rgba(253,224,71,.22); }
.lucky-commerce-slider.metal .lucky-slide-card { box-shadow: 0 0 22px rgba(248,250,252,.22); }
.lucky-commerce-slider.water .lucky-slide-card { box-shadow: 0 0 22px rgba(56,189,248,.22); }
.stagger-1 { animation-delay: .06s; }
.stagger-2 { animation-delay: .16s; }
@keyframes luckyStagger {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}
.section-badge {
  display: inline-grid;
  place-items: center;
  width: 24px;
  height: 24px;
  margin-right: 6px;
  border-radius: 999px;
  font-size: 12px;
  font-weight: 800;
  color: #fff;
  background: linear-gradient(135deg, #7a57d8, #3d5fc9);
  border: 1px solid rgba(255,255,255,.28);
  box-shadow: 0 0 12px rgba(122,87,216,.45);
  vertical-align: middle;
}
.reveal-page h3 .section-badge { transform: translateY(-1px); }
@media (max-width: 640px) {
  .section-badge { width: 22px; height: 22px; font-size: 11px; margin-right: 5px; }
}
.compat-keyword-block {
  margin-top: 12px;
  padding-top: 10px;
  border-top: 1px solid rgba(255,255,255,.12);
}
.compat-keyword-block h4 {
  margin: 0 0 8px;
  color: #f3f4f8;
  font-size: 15px;
}
.compat-keyword-row { display: flex; flex-wrap: wrap; gap: 8px; margin: 8px 0 8px; }
.compat-keyword-tag {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  border-radius: 999px;
  padding: 7px 11px;
  font-weight: 700;
  letter-spacing: .01em;
  border: 1px solid rgba(255,255,255,.1);
  box-shadow: 0 0 12px rgba(0,0,0,.16);
}
.compat-keyword-tag.good {
  background: rgba(85, 138, 110, 0.16);
  border-color: rgba(160, 206, 181, 0.32);
  color: #b9e0ce;
}
.compat-keyword-tag.warn {
  background: rgba(138, 112, 85, 0.16);
  border-color: rgba(212, 183, 149, 0.32);
  color: #e7d2b6;
}
.compat-keyword-tag:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0,0,0,0.2);
}
#mindKeywordCard {
  background: linear-gradient(160deg, rgba(31, 18, 56, .82), rgba(50, 28, 85, .76));
  border: 1px solid rgba(255,255,255,.14);
}
#mindKeywordCard h3,
#mindKeywordCard .small,
#mindKeywordCard p { color: #E0E0E0; }
#mindKeywordCard .small { opacity: .92; }
@media (max-width: 640px) {
  .lucky-grid { grid-template-columns: 1fr; }
  .lucky-commerce-slider { grid-auto-columns: minmax(240px, 88%); }
  .lucky-footer-row { flex-direction: column; align-items: flex-start; }
}
.kakao-share {
  width: 100%;
  background: #FEE500;
  color: #3C1E1E;
  border: 1px solid #f2d400;
  font-weight: 700;
}
@keyframes slideInX { from { opacity: .35; transform: translateX(12px);} to {opacity:1; transform: translateX(0);} }
.radial-wrap { display: flex; gap: 10px; flex-wrap: wrap; margin: 8px 0 12px; }
.radial-item { text-align: center; }
.radial-chart {
  --deg: 180deg; width: 72px; aspect-ratio: 1; border-radius: 50%;
  background: conic-gradient(var(--gold) var(--deg), rgba(255,255,255,.2) 0);
  display: grid; place-items: center;
}
.radial-chart::before {
  content: attr(data-value); width: 52px; aspect-ratio: 1; border-radius: 50%;
  background: var(--card); display: grid; place-items: center; font-size: 12px; font-weight: 700;
}
.constellation-loader { margin: 14px auto 0; width: 220px; position: relative; height: 56px; }
.constellation-loader .node {
  position: absolute; width: 12px; height: 12px; border-radius: 50%;
  background: #fff; box-shadow: 0 0 12px rgba(255,255,255,.8); animation: twinkle 1.6s ease-in-out infinite;
}
.constellation-loader .node:nth-child(1){left:10px;top:20px;}
.constellation-loader .node:nth-child(2){left:70px;top:8px;animation-delay:.2s;}
.constellation-loader .node:nth-child(3){left:130px;top:26px;animation-delay:.4s;}
.constellation-loader .node:nth-child(4){left:198px;top:10px;animation-delay:.6s;}
.constellation-loader::before {
  content: ''; position: absolute; left: 12px; right: 14px; top: 24px; height: 2px;
  background: linear-gradient(90deg, rgba(255,255,255,.35), rgba(255,255,255,.8), rgba(255,255,255,.35)); transform: skewY(-8deg);
}
.ai-coach-fab {
  position: fixed; right: 18px; bottom: 88px; z-index: 120; text-decoration: none;
  padding: 12px 16px; border-radius: 999px; color: #fff; font-weight: 700;
  background: linear-gradient(135deg, #7f53d8, #44318d); border: 1px solid rgba(255,255,255,.28);
  box-shadow: 0 14px 28px rgba(22, 14, 45, .35);
}
@keyframes twinkle {
  0%, 100% { opacity: .6; transform: scale(1); }
  50% { opacity: 1; transform: scale(1.2); }
}
@media (max-width: 640px) {
  .tooltip { left: 0; top: 22px; width: 200px; }
  .step-actions { flex-direction: column; }
  .ai-coach-fab { right: 12px; bottom: 78px; font-size: 13px; }
}

/* === UX Overhaul: The First Impact / Live Analyzing / The Reveal === */
.first-impact {
  min-height: 72vh;
  display: grid;
  align-content: center;
  justify-items: center;
  gap: 18px;
  text-align: center;
  position: relative;
  overflow: hidden;
  background:
    radial-gradient(340px 220px at 50% 38%, rgba(255,236,184,.22), transparent 70%),
    linear-gradient(160deg, #190f2f, #2b1950 48%, #160d2a);
}
.impact-glow {
  position: absolute;
  inset: 0;
  background: radial-gradient(circle at 50% 40%, rgba(238,198,110,.3), transparent 48%);
  pointer-events: none;
}
.impact-copy {
  max-width: 700px;
  color: #f6eefe;
  font-weight: 700;
  font-size: clamp(24px, 4vw, 42px);
  z-index: 1;
  margin: 0;
}
.impact-object { z-index: 1; perspective: 1200px; }
.gold-tarot-card {
  width: min(200px, 48vw);
  aspect-ratio: 2 / 3;
  border-radius: 20px;
  border: 1px solid rgba(246,209,112,.8);
  background: linear-gradient(160deg, rgba(37,22,66,.95), rgba(21,13,39,.98));
  box-shadow: 0 0 0 2px rgba(239,203,100,.24), 0 18px 40px rgba(0,0,0,.45);
  display: grid;
  place-items: center;
  color: #efcb64;
  animation: cardFloat 4s ease-in-out infinite;
  position: relative;
  overflow: hidden;
}
.gold-tarot-card .card-mini { font-size: 12px; letter-spacing: 1.5px; z-index: 2; }
.gold-tarot-card strong { font-size: 28px; letter-spacing: 1px; z-index: 2; }
.gold-tarot-card .card-icon { z-index: 2; font-size: 20px; }
.gold-tarot-card .card-bgword {
  position: absolute;
  inset: auto 10px 12px 10px;
  font-size: 20px;
  letter-spacing: 2px;
  opacity: .11;
  color: #fff3cc;
  font-weight: 800;
}
.gold-tarot-card.is-flipping { animation: cardFlipSwap .56s ease, cardFloat 4s ease-in-out infinite; }
.gold-tarot-card.mode-glow { box-shadow: 0 0 0 2px rgba(239,203,100,.24), 0 18px 40px rgba(0,0,0,.45), 0 0 26px rgba(239,203,100,.38); }
.impact-form { z-index: 1; width: min(540px, 92%); display: grid; gap: 10px; }
.impact-form label { color: rgba(255,255,255,.9); font-weight: 600; }
.impact-form input { background: rgba(14,8,24,.55); color: #fff; }
.impact-cta {
  font-size: 16px;
  width: 100%;
  display: block;
  margin-top: 4px;
  text-align: center;
}
@media (max-width: 640px) {
  .impact-form { width: 100%; }
  .impact-cta { width: 100%; }
}
.impact-transition {
  position: fixed;
  inset: 0;
  display: grid;
  place-items: center;
  background: rgba(0,0,0,.8);
  z-index: 1200;
}
.impact-ripple {
  width: 30px;
  height: 30px;
  border-radius: 50%;
  border: 2px solid rgba(239,203,100,.9);
  box-shadow: 0 0 40px rgba(239,203,100,.5);
  animation: rippleOut .8s ease forwards;
}

.live-analyzing-card { background: linear-gradient(160deg, rgba(27,17,44,.92), rgba(39,27,67,.84)); }
.analysis-title {
  color: #fff;
  font-size: clamp(28px, 6.4vw, 40px);
  line-height: 1.24;
  margin: 2px 0 12px;
  word-break: keep-all;
}
#modeHint {
  font-size: 16px !important;
  line-height: 1.7;
  color: #f5ecff;
  font-weight: 700;
}
.concern-pill {
  display: inline-flex;
  align-items: center;
  padding: 4px 10px;
  border-radius: 999px;
  background: rgba(239,203,100,.18);
  border: 1px solid rgba(239,203,100,.5);
  color: #ffe6a7;
  margin-left: 4px;
  cursor: pointer;
  font-size: inherit;
  line-height: 1.2;
}

body.adult-mode .live-analyzing-card {
  background: linear-gradient(165deg, rgba(56, 17, 74, .94), rgba(81, 18, 39, .9));
  border-color: rgba(245, 98, 157, .45);
}
body.adult-mode .question-card {
  background: linear-gradient(165deg, rgba(49, 15, 67, .75), rgba(93, 17, 45, .6));
  border-color: rgba(232, 122, 170, .45);
}
body.adult-mode .option {
  border-color: rgba(232, 122, 170, .32);
}
body.compat-mode .live-analyzing-card {
  background: linear-gradient(165deg, rgba(63, 22, 87, .92), rgba(146, 67, 124, .72));
  border-color: rgba(255, 174, 212, .45);
}
body.compat-mode .question-card {
  background: linear-gradient(165deg, rgba(82, 33, 109, .66), rgba(168, 80, 138, .46));
  border-color: rgba(255, 174, 212, .45);
}
.question-context {
  font-size: 15px !important;
  line-height: 1.55;
  color: #e9dcff !important;
  font-weight: 700;
}
.question-card h3 {
  font-size: clamp(28px, 6vw, 38px);
  line-height: 1.35;
}
.analyzing-statusbar {
  display: flex;
  gap: 8px;
  margin-bottom: 10px;
  overflow-x: auto;
  padding: 2px 10px 4px 2px;
  -webkit-overflow-scrolling: touch;
  scrollbar-width: none;
}
.analyzing-statusbar::-webkit-scrollbar { display: none; }
.scan-icon {
  border: 1px solid var(--border);
  border-radius: 14px;
  padding: 8px;
  color: #d8c5ff;
  text-align: center;
  font-weight: 700;
  background: rgba(255,255,255,.04);
  cursor: pointer;
  min-width: 92px;
  flex: 0 0 auto;
}
button.scan-icon,
button.scan-icon:hover {
  background: rgba(255,255,255,.04);
  border: 1px solid var(--border);
  color: #d8c5ff;
  transform: none;
}
.scan-icon span { display: block; font-size: 11px; }
.scan-icon.active { color: #fff; border-color: var(--gold); box-shadow: 0 0 20px rgba(239,203,100,.28); }
.scan-icon.scanning { animation: scanPulse .45s ease 2; }
.scan-icon.clicked-pulse { animation: borderWave .5s ease; }
@keyframes borderWave {
  0% { box-shadow: 0 0 0 0 rgba(239,203,100,.15); border-color: var(--border); }
  50% { box-shadow: 0 0 0 8px rgba(239,203,100,.12); border-color: var(--gold); }
  100% { box-shadow: 0 0 0 0 rgba(239,203,100,0); border-color: var(--gold); }
}
.live-metric-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-top: 12px; }
.live-metric { border: 1px solid var(--border); border-radius: 14px; padding: 10px; background: rgba(255,255,255,.05); }
.live-metric strong { color: #fff; font-size: 28px; }
.live-ticker {
  margin-top: 10px;
  border: 1px solid var(--border);
  border-radius: 999px;
  padding: 9px 12px;
  color: #f1e8ff;
  background: rgba(255,255,255,.06);
}

.weather-hero { display: grid; grid-template-columns: 1fr auto; gap: 10px; align-items: center; }
.weather-badge { font-size: 13px; border: 1px solid var(--border); padding: 5px 10px; border-radius: 999px; }
.golden-time { font-size: clamp(48px, 9vw, 88px); color: var(--gold); font-weight: 800; line-height: 1; }
.golden-time-pill {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 8px 14px;
  border-radius: 999px;
  border: 1px solid rgba(239,203,100,.72);
  background: linear-gradient(135deg, rgba(76,52,131,.38), rgba(31,19,62,.8));
  box-shadow: 0 0 20px rgba(239,203,100,.35), 0 0 30px rgba(181,124,255,.22);
}

/* Result page minimal header + mode emphasis */
.minimal-report-header {
  display: grid;
  grid-template-columns: auto 1fr auto;
  align-items: center;
  gap: 10px;
}
.report-title-wrap { display: grid; gap: 2px; justify-items: center; }
.report-title { margin: 0; font-size: 15px; color: var(--gold); letter-spacing: .2px; font-weight: 700; }
.result-drawer {
  display: grid;
  gap: 8px;
  margin: -6px 0 10px;
  justify-items: end;
}
.result-drawer[hidden] { display: none; }
.mode-hero-badge {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  font-size: 14px;
  font-weight: 700;
  padding: 8px 12px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.18);
  background: rgba(255,255,255,.05);
  color: #d9deec;
  margin-bottom: 10px;
}
.result-main-title { font-size: clamp(28px, 5vw, 36px); }
.hero-focus-wrap { text-align: center; padding: 10px 4px 8px; }
.hero-name {
  font-family: var(--font-serif);
  font-size: clamp(32px, 7.4vw, 48px);
  font-weight: 700;
  letter-spacing: .2px;
  line-height: 1.15;
  margin-bottom: 10px;
}
.hero-grade-badge {
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 12px 24px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.16);
  background: linear-gradient(135deg, rgba(255,255,255,.12), rgba(255,255,255,.04));
  color: #f7f8fc;
  font-weight: 800;
  letter-spacing: .05em;
  margin: 8px 0 16px;
  overflow: hidden;
}
.hero-grade-badge::after {
  content: '';
  position: absolute;
  top: 0;
  left: -130%;
  width: 55%;
  height: 100%;
  background: linear-gradient(110deg, transparent, rgba(255,255,255,.4), transparent);
  animation: heroShimmer 2.4s ease-in-out infinite;
}
.hero-grade-display {
  font-family: var(--font-number);
  font-size: clamp(28px, 7vw, 46px);
  line-height: 1;
  box-shadow: 0 0 22px rgba(255,215,120,.42), 0 0 42px rgba(147,112,255,.24);
  text-shadow: 0 1px 0 rgba(0,0,0,.22);
  animation: heroGradeZoom .55s ease both;
}
.mode-hero-note.hero-one-liner {
  font-family: var(--font-serif);
  font-size: clamp(19px, 4.8vw, 26px);
  font-weight: 700;
  line-height: 1.45;
  margin: 2px 0 14px;
  background: linear-gradient(90deg, #f6e39b, #eebf63);
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
}
.fortune-score-head strong {
  font-family: var(--font-number);
  background: linear-gradient(90deg, #f6e39b, #d29dff);
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
}
.reveal-weather .weather-hero {
  background: linear-gradient(160deg, rgba(20,18,37,.42), rgba(35,23,61,.3));
  border-radius: 22px;
  border: 1px solid rgba(255,255,255,.08);
}
@keyframes heroGradeZoom {
  from { transform: scale(.92); opacity: .75; }
  to { transform: scale(1); opacity: 1; }
}
@keyframes heroShimmer {
  0% { left: -130%; }
  60%,100% { left: 150%; }
}
.hero-merged-summary {
  margin-top: 14px;
  border-top: 1px solid rgba(255,255,255,.12);
  padding-top: 12px;
}
.hero-merged-summary .grade-emblem {
  margin-bottom: 8px;
}
.fortune-score-head { text-align: center; margin-bottom: 6px; }
.hero-score-bar { max-width: 520px; margin: 0 auto; }
.hero-score-bar .hero-score-fill {
  display: block;
  height: 100%;
  width: 0;
  background: linear-gradient(90deg, #8d6dff, #efcb64);
  border-radius: inherit;
  box-shadow: 0 0 10px rgba(141,109,255,.45), 0 0 18px rgba(239,203,100,.35);
  animation: scoreFill .8s ease forwards;
  animation-delay: .15s;
}
@keyframes scoreFill {
  to { width: calc(var(--score, 0) * 1%); }
}
.hero-mini-metrics {
  margin-top: 8px;
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 8px;
}
.mini-metric {
  border: 1px solid rgba(255,255,255,.12);
  border-radius: 12px;
  background: rgba(255,255,255,.04);
  padding: 8px 10px;
}
.mini-metric span {
  display: block;
  font-size: 11px;
  color: #cfd3df;
  font-weight: 500;
}
.mini-metric strong {
  display: block;
  margin-top: 2px;
  font-size: 14px;
  font-weight: 600;
  color: #f4f6fb;
}

.reveal-ziwei {
  margin-top: 10px;
  width: min(360px, 100%);
  aspect-ratio: 1/1;
  border-radius: 50%;
  border: 1px solid rgba(239,203,100,.5);
  position: relative;
  background: radial-gradient(circle, rgba(99,66,167,.38), transparent 60%);
}
.reveal-ziwei::before,
.reveal-ziwei::after {
  content: '';
  position: absolute;
  inset: 16%;
  border-radius: 50%;
  border: 1px dashed rgba(239,203,100,.6);
}
.reveal-ziwei::after { inset: 34%; }
.star-word { margin-top: 8px; color: var(--gold); font-weight: 800; font-size: 20px; }
.authority-quote {
  margin-top: 12px;
  border-left: 4px solid var(--gold);
  padding: 10px 14px;
  background: rgba(255,255,255,.08);
  font-size: 18px;
  color: #f4ebff;
}
.reveal-strong-cta { width: 100%; text-align: center; font-size: clamp(15px, 2vw, 18px); padding: 14px 16px; margin-bottom: 10px; }

@keyframes cardFloat {
  0%,100% { transform: translateY(0) rotate(-1deg); }
  50% { transform: translateY(-10px) rotate(1deg); }
}
@keyframes cardFlipSwap {
  0% { transform: rotateY(0deg); }
  50% { transform: rotateY(90deg); }
  100% { transform: rotateY(0deg); }
}
@keyframes rippleOut { to { transform: scale(40); opacity: 0; } }
@keyframes scanPulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.08); }
  100% { transform: scale(1); }
}

@media (max-width: 640px) {
  .weather-hero { grid-template-columns: 1fr; }
  .reveal-page .card,
  .ziwei-report-page .card { padding: 32px 24px; }
  .hero-mini-metrics { grid-template-columns: repeat(3, minmax(0, 1fr)); }
  .mini-metric { padding: 7px 8px; }
  .mini-metric strong { font-size: 13px; }
  .analysis-title { font-size: clamp(20px, 5.8vw, 28px); }
  #modeHint { font-size: 14px !important; }
  .question-context { font-size: 13px !important; }
  .question-card h3 { font-size: clamp(18px, 5.2vw, 24px); line-height: 1.42; }
  .concern-pill { margin-left: 0; margin-top: 6px; }
  .header-actions { gap: 6px; }
  .icon-btn { min-height: 34px; min-width: 34px; font-size: 16px; }
  .theme-btn { font-size: 11px; min-height: 34px; padding: 7px 10px; }

  .live-focus-page .live-analyzing-card { padding-top: 14px; }
  .live-focus-page .progress-wrap { margin-top: 6px; margin-bottom: 8px; }
  .live-focus-page .progress-label { font-size: 13px; }
}

/* Phase4 polish */
.pre-result-card {
  position: relative;
  overflow: hidden;
  border: 1px solid rgba(239,203,100,.35);
}
.pre-result-orbit {
  width: 140px;
  height: 140px;
  margin: 0 auto 12px;
  border-radius: 50%;
  border: 1px dashed rgba(239,203,100,.7);
  position: relative;
  animation: orbit 5s linear infinite;
}
.pre-result-orbit::before {
  content: '';
  position: absolute;
  inset: -24px;
  border-radius: 50%;
  background: radial-gradient(circle, rgba(255,230,154,.18), transparent 68%);
  animation: pulseGlow 1.6s ease-in-out infinite;
}
.pre-result-core {
  position: absolute;
  inset: 36px;
  border-radius: 50%;
  background: radial-gradient(circle at 30% 30%, rgba(255,255,255,.85), rgba(129,88,206,.9));
  box-shadow: 0 0 32px rgba(239,203,100,.65);
}
.pre-result-metrics strong { color: #fff; font-size: 32px; }

.gold-highlight-card {
  border: 2px solid rgba(239,203,100,.76);
  box-shadow: 0 0 0 1px rgba(255,230,172,.45), var(--shadow);
  background: linear-gradient(145deg, rgba(255,252,243,.88), rgba(255,245,220,.7));
}
[data-theme='dark'] .gold-highlight-card {
  background: linear-gradient(145deg, rgba(42,30,60,.86), rgba(37,24,58,.82));
}
.gold-highlight-value {
  color: color-mix(in srgb, var(--gold) 82%, #fff);
  font-size: clamp(34px, 7vw, 56px);
  font-weight: 900;
  line-height: 1.1;
}
.core-value {
  font-size: 30px;
  font-weight: 900;
  color: color-mix(in srgb, var(--gold) 82%, #fff);
}

.fortune-card-section[data-card-theme='tarot'] .fortune-card-grid {
  perspective: 1200px;
  padding: 18px 8px 24px;
  background:
    radial-gradient(ellipse at 50% 118%, rgba(73,52,39,.42), transparent 70%),
    linear-gradient(180deg, rgba(44,27,72,.16), rgba(25,15,40,.02));
  border-radius: 20px;
}
.fortune-card-section[data-card-theme='tarot'] .fortune-card {
  transform: perspective(1200px) rotateX(10deg);
  transform-origin: center bottom;
}
.fortune-card-section[data-card-theme='tarot'] .fortune-card:hover .fortune-card-inner,
.fortune-card-section[data-card-theme='tarot'] .fortune-card:focus-visible .fortune-card-inner {
  transform: translateY(-14px) rotateZ(-1deg);
  filter: drop-shadow(0 14px 20px rgba(0,0,0,.35));
}

.bottom-nav {
  justify-content: space-between;
  gap: 10px;
}
.bottom-nav a {
  flex: 1 0 auto;
  text-align: center;
}

@keyframes pulseGlow {
  0%,100% { opacity: .55; transform: scale(1); }
  50% { opacity: 1; transform: scale(1.08); }
}

/* Phase5 conversion + mystic impact */
[data-theme='dark'] {
  --bg: #1A1A2E;
  --bg-grad-start: #1A1A2E;
  --bg-grad-mid: #241d46;
  --bg-grad-end: #1A1A2E;
}
.card { position: relative; }
.card::before {
  content: '';
  position: absolute;
  left: 18px;
  right: 18px;
  top: 0;
  height: 1px;
  background: linear-gradient(90deg, transparent, rgba(212,175,55,.45), transparent);
}
.gold-highlight-value,
.core-value,
.golden-time {
  color: #efcb64;
  text-shadow: 0 0 10px rgba(181,124,255,.46), 0 0 22px rgba(239,203,100,.34);
}
.bridge-card { border-color: rgba(212,175,55,.45); }
.briefing-card { border-color: rgba(165,124,255,.4); }

.pre-result-message { color: rgba(255,255,255,.9); }
.ziwei-loader-sigil {
  width: 120px;
  height: 120px;
  margin: 6px auto 12px;
  position: relative;
}
.ziwei-loader-sigil span {
  position: absolute;
  inset: 0;
  border: 1px solid rgba(212,175,55,.5);
  border-radius: 14px;
  animation: sigilDraw 2.8s ease-in-out infinite;
}
.ziwei-loader-sigil span:nth-child(2) { transform: rotate(30deg); animation-delay: .2s; }
.ziwei-loader-sigil span:nth-child(3) { transform: rotate(60deg); animation-delay: .45s; }
.ziwei-loader-sigil span:nth-child(4) { inset: 24px; border-radius: 50%; animation-delay: .7s; }

.ziwei-board { animation: none; }
.palace {
  position: relative;
  font-size: 14px;
  cursor: pointer;
}
.palace.mingzhu {
  box-shadow: inset 0 0 0 1px rgba(255,225,145,.88), 0 0 18px rgba(212,175,55,.45);
  background: linear-gradient(140deg, rgba(123,71,212,.72), rgba(35,20,62,.7));
}
.palace.selected { outline: 2px solid rgba(185,140,255,.9); z-index: 1; }
.mingzhu-tag {
  position: absolute;
  bottom: 6px;
  right: 6px;
  font-size: 10px;
  color: #fbe7ab;
}
.ziwei-detail-card {
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 10px 12px;
  background: rgba(255,255,255,.08);
  color: #f4ebff;
  margin-bottom: 10px;
}
.ziwei-detail-card p { margin: 4px 0 0; }

.expert-match-label {
  margin: 0 0 10px;
  display: flex;
  flex-direction: column;
  gap: 2px;
}
.expert-match-label strong {
  font-size: 13px;
  color: #f5d97f;
}
.expert-match-label span {
  font-size: 11px;
  opacity: .75;
}

.typing-indicator {
  min-width: 72px;
  display: inline-flex;
  align-items: center;
  gap: 6px;
}
.typing-indicator span {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: rgba(200,155,255,.9);
  animation: typingPulse 1s infinite;
}
.typing-indicator span:nth-child(2) { animation-delay: .15s; }
.typing-indicator span:nth-child(3) { animation-delay: .3s; }
.bubble-pop { animation: bubblePop .38s cubic-bezier(.22,1.4,.36,1); }

/* Font mapping (ìš”ì²­ ë°˜ì˜) */
#resultBox h1,
#bridgeBox h3,
#briefingBox h3,
#goldenTimeCard h3,
#mindKeywordCard h3,
.star-word,
.authority-quote,
.bridge-card p:first-of-type {
  font-family: var(--font-point);
  font-weight: 400;
}

#chatPanel .bubble.ai,
.coach-bubbles .bubble.ai,
.fortune-card .card-front strong,
.fortune-card .card-front small {
  font-family: var(--font-point);
  font-weight: 400;
}

.gold-highlight-value,
.core-value,
.golden-time,
.live-metric strong,
.metric-chip strong {
  font-family: var(--font-number);
  font-weight: 700;
  letter-spacing: .2px;
}


@keyframes sigilDraw {
  0% { opacity: .2; transform: scale(.9) rotate(0deg); }
  50% { opacity: .9; transform: scale(1) rotate(12deg); }
  100% { opacity: .2; transform: scale(.9) rotate(24deg); }
}
@keyframes typingPulse {
  0%,80%,100% { transform: translateY(0); opacity: .45; }
  40% { transform: translateY(-4px); opacity: 1; }
}
@keyframes bubblePop {
  0% { transform: scale(.85) translateY(8px); opacity: 0; }
  100% { transform: scale(1) translateY(0); opacity: 1; }
}

/* === commercial polish overrides === */
.number-metric { font-family: var(--font-number); font-weight: 800; }
.trust-counter-card p { margin: 0; text-align: center; font-weight: 600; }
.trust-counter-card strong { font-size: clamp(26px, 4vw, 34px); color: var(--gold); }

.progress-star-track { position: relative; }
.progress-star {
  position: absolute;
  top: -12px;
  left: -10px;
  transition: left .45s cubic-bezier(.22,.61,.36,1);
  filter: drop-shadow(0 0 8px rgba(239,203,100,.7));
}
@keyframes fadeOutSoft { from { opacity: 1; transform: translateY(0) scale(1); } to { opacity: 0; transform: translateY(-6px) scale(.985);} }
@keyframes fadeInSoft { from { opacity: 0; transform: translateY(8px) scale(.985);} to { opacity: 1; transform: translateY(0) scale(1);} }
.slide-out { animation: fadeOutSoft .46s ease forwards !important; }
.slide-in { animation: fadeInSoft .52s ease !important; }
.fade-swap { animation: fadeInSoft .34s ease; }

/* font strategy reset and remap */
#resultBox h1,
#bridgeBox h3,
#briefingBox h3,
#goldenTimeCard h3,
#mindKeywordCard h3,
.star-word,
.authority-quote,
.bridge-card p:first-of-type,
.fortune-card .card-front strong,
.fortune-card .card-front small,
.destiny-line { font-family: var(--font-body) !important; }

#chatPanel .bubble.ai,
.coach-bubbles .bubble.ai,
.destiny-line,
.hand-font {
  font-family: var(--font-point) !important;
  font-size: max(18px, 1.05rem);
  line-height: 1.85;
  font-weight: 400;
}

.core-metric-grid {
  display:grid;
  grid-template-columns: repeat(auto-fit,minmax(220px,1fr));
  gap: 12px;
}
.wizard-dashboard {
  position: relative;
  isolation: isolate;
}
.wizard-dashboard::before {
  content: '';
  position: absolute;
  inset: -8px;
  background: radial-gradient(circle at 20% 10%, rgba(239,203,100,.18), transparent 45%), radial-gradient(circle at 80% 90%, rgba(166,120,255,.14), transparent 40%);
  z-index: -1;
  pointer-events: none;
}
.gauge-card {
  padding: 16px 14px 18px;
  border-radius: 24px 24px 24px 10px;
  border: 1px solid rgba(239,203,100,.34);
  background: linear-gradient(145deg, rgba(255,255,255,.12), rgba(255,255,255,.06));
  backdrop-filter: blur(9px);
  box-shadow: inset 0 1px 0 rgba(255,255,255,.2), 0 12px 30px rgba(9,6,22,.3), 0 0 18px rgba(212,175,55,.18);
}
.gauge-head {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  font-weight: 700;
}
.metric-icon { color: var(--gold); filter: drop-shadow(0 0 8px rgba(239,203,100,.4)); }
.gauge-wrap {
  margin-top: 8px;
  position: relative;
  width: 120px;
  height: 120px;
}
.gauge-svg { width: 120px; height: 120px; transform: rotate(-90deg); }
.gauge-ring-bg {
  fill: none;
  stroke: rgba(255,255,255,.16);
  stroke-width: 10;
}
.gauge-ring-progress {
  fill: none;
  stroke: var(--gold);
  stroke-width: 10;
  stroke-linecap: round;
  filter: drop-shadow(0 0 10px rgba(212,175,55,.45));
}
.gauge-card:nth-child(1) .gauge-ring-progress { stroke: #b185ff; }
.gauge-card:nth-child(2) .gauge-ring-progress { stroke: #efcb64; }
.gauge-value {
  position: absolute;
  inset: 0;
  display: grid;
  place-items: center;
  font-size: clamp(30px, 7vw, 46px);
  text-shadow: 0 0 16px rgba(239,203,100,.35);
}
.detail-metric-grid { grid-template-columns: 1fr; gap: 10px; }
.gauge-detail .gauge-layout {
  display: grid;
  grid-template-columns: 124px minmax(0, 1fr);
  gap: 12px;
  align-items: center;
}
.gauge-card { overflow: hidden; }
.metric-copy,
.metric-block,
.metric-accordion { min-width: 0; }
.metric-copy p,
.metric-evidence,
.metric-block p {
  overflow-wrap: anywhere;
  word-break: keep-all;
}
.metric-copy p {
  margin: 0;
  color: #E0E0E0;
  line-height: 1.6;
  font-size: 15px;
}
.metric-evidence {
  margin-top: 6px;
  color: #b9c2da;
  font-size: 12px;
}
.metric-block {
  margin-top: 10px;
  padding: 10px 0;
  border: 0;
  border-radius: 0;
  background: transparent;
}
.metric-block strong {
  display: block;
  font-size: 13px;
  margin-bottom: 4px;
  color: #f1f3f8;
}
.metric-detail-btn {
  margin-top: 12px;
  width: 100%;
  min-height: 40px;
  padding: 10px 14px;
  font-size: 13px;
  border: 1px solid rgba(255,255,255,.22);
  background: rgba(255,255,255,.08);
  display: flex;
  justify-content: center;
}
.metric-accordion {
  max-height: 0;
  overflow: hidden;
  transition: max-height .3s ease;
  line-height: 1.8;
  letter-spacing: -0.5px;
}
.metric-deep {
  margin-top: 8px;
  display: grid;
  gap: 10px;
  min-width: 0;
}
.metric-deep .metric-evidence {
  margin: 0;
  padding: 8px 10px;
  border: 1px solid rgba(255,255,255,.08);
  border-radius: 10px;
  background: rgba(255,255,255,.02);
}
.metric-deep .metric-evidence strong {
  display: block;
  color: #f1f4ff;
  font-size: 14px;
  font-weight: 800;
  margin-bottom: 6px;
}
.metric-deep .metric-evidence {
  line-height: 1.8;
  letter-spacing: -0.2px;
}
.metric-deep .metric-evidence.gaeun-wood { background: rgba(74,222,128,.10); }
.metric-deep .metric-evidence.gaeun-fire { background: rgba(251,113,133,.10); }
.metric-deep .metric-evidence.gaeun-earth { background: rgba(253,224,71,.10); }
.metric-deep .metric-evidence.gaeun-metal { background: rgba(248,250,252,.10); }
.metric-deep .metric-evidence.gaeun-water { background: rgba(56,189,248,.10); }
.spell-key { color: #efcb64; font-weight: 700; }
.luck-scroll {
  margin-top: 8px;
  display: grid;
  grid-auto-flow: column;
  grid-auto-columns: minmax(260px, 82%);
  gap: 12px;
  overflow-x: auto;
  padding-bottom: 6px;
  scroll-snap-type: x mandatory;
  min-width: 0;
}
.luck-commerce-card {
  scroll-snap-align: start;
  border: 1px solid rgba(255,255,255,.14);
  border-radius: 14px;
  overflow: hidden;
  background: rgba(255,255,255,.04);
  box-shadow: 0 0 18px rgba(146,118,216,.22);
}
.luck-label {
  font-size: 12px;
  color: #dbe2f5;
  padding: 8px 10px;
  border-bottom: 1px solid rgba(255,255,255,.1);
}
.luck-commerce-card img {
  width: 100%;
  height: 124px;
  object-fit: cover;
  display: block;
}
.luck-body { padding: 10px; }
.luck-body strong { display: block; margin-bottom: 6px; color: #f3f5ff; }
.luck-body p { margin: 0 0 10px; font-size: 13px; line-height: 1.65; color: #d7dceb; }
.luck-body .small { margin-top: -4px; margin-bottom: 10px; color: #bfc7de; font-size: 12px; }
.luck-cta {
  display: inline-block;
  text-decoration: none;
  padding: 8px 12px;
  border-radius: 999px;
  font-weight: 700;
  color: #241400;
  background: linear-gradient(135deg, #f3d37a, #d7a53d);
  box-shadow: 0 0 12px rgba(243,211,122,.45);
}
.luck-cta.silver {
  color: #151824;
  background: linear-gradient(135deg, #d9deec, #aeb8d4);
  box-shadow: 0 0 10px rgba(189,200,232,.35);
}
.luck-wood .luck-commerce-card { background: linear-gradient(145deg, rgba(74,222,128,.10), rgba(255,255,255,.03)); }
.luck-fire .luck-commerce-card { background: linear-gradient(145deg, rgba(251,113,133,.10), rgba(255,255,255,.03)); }
.luck-earth .luck-commerce-card { background: linear-gradient(145deg, rgba(253,224,71,.10), rgba(255,255,255,.03)); }
.luck-metal .luck-commerce-card { background: linear-gradient(145deg, rgba(248,250,252,.10), rgba(255,255,255,.03)); }
.luck-water .luck-commerce-card { background: linear-gradient(145deg, rgba(56,189,248,.10), rgba(255,255,255,.03)); }
.pillars-compare {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 10px;
}
.pillars-person h4 {
  margin: 0 0 6px;
  color: #f3f4f8;
}
.pillars-row-label {
  font-size: 12px;
  color: #b9c2da;
  margin: 4px 0;
}
.pillars-grid {
  display: grid;
  grid-template-columns: repeat(4, minmax(0, 1fr));
  gap: 6px;
  margin-bottom: 6px;
}
.pillar-cell {
  border-radius: 14px;
  padding: 10px 8px;
  text-align: center;
  border: 1px solid rgba(255,255,255,.12);
}
.pillar-cell small {
  display: block;
  font-size: 10px;
  opacity: .8;
}
.pillar-cell strong {
  display: block;
  margin-top: 2px;
  font-size: 18px;
  font-weight: 800;
}
.pillar-cell.wood { background: rgba(74,222,128,.2); color: #a6f4c5; }
.pillar-cell.fire { background: rgba(251,113,133,.2); color: #ffc0cb; }
.pillar-cell.earth { background: rgba(253,224,71,.2); color: #ffe894; }
.pillar-cell.metal { background: rgba(248,250,252,.2); color: #ffffff; }
.pillar-cell.water { background: rgba(56,189,248,.2); color: #9de3ff; }
#pillarsBox,
#ossEngineBox {
  padding: 22px 18px !important;
  margin-bottom: 18px !important;
}
#pillarsBox h3,
#ossEngineBox h3 { font-size: 20px; }
#pillarsBox .small,
#ossEngineBox .small { font-size: 13px; }

.rule-map {
  margin-top: 10px;
  border: 1px solid rgba(255,255,255,.12);
  border-radius: 12px;
  padding: 8px 10px;
  background: rgba(255,255,255,.03);
}
.rule-map summary { cursor: pointer; color: #d9deec; font-weight: 700; }
.rule-map-table {
  margin-top: 8px;
  display: grid;
  grid-template-columns: .9fr 1.4fr 2fr;
  gap: 6px 10px;
  font-size: 12px;
  line-height: 1.55;
}
.rule-map-table strong { color: #efcb64; font-size: 12px; }

@media (max-width: 640px) {
  .pillars-compare { grid-template-columns: 1fr; }
  #pillarsBox,
  #ossEngineBox { padding: 18px 14px !important; }
  .rule-map-table { grid-template-columns: 1fr; }
  .luck-scroll {
    grid-auto-flow: row;
    grid-auto-columns: 1fr;
    overflow-x: visible;
    scroll-snap-type: none;
  }
  .luck-commerce-card {
    width: 100%;
    min-width: 0;
  }
  .luck-body,
  .luck-label,
  .metric-deep .metric-evidence {
    min-width: 0;
    word-break: keep-all;
    overflow-wrap: anywhere;
  }
}
.metric-info {
  display: inline-grid;
  place-items: center;
  width: 18px;
  height: 18px;
  border-radius: 999px;
  font-size: 11px;
  font-weight: 800;
  color: #0a0b14;
  background: #d8def7;
  margin-left: 6px;
  cursor: help;
}
.gauge-detail.low { border-color: rgba(255, 183, 77, .45); box-shadow: 0 0 0 1px rgba(255,183,77,.15), 0 12px 28px rgba(0,0,0,.34); }
.gauge-detail.low .gauge-ring-progress { stroke: #FF8A65 !important; filter: drop-shadow(0 0 10px rgba(255,138,101,.45)); }
.gauge-detail.mid .gauge-ring-progress { stroke: #F6C45B !important; filter: drop-shadow(0 0 8px rgba(246,196,91,.35)); }
.gauge-detail.high { border-color: rgba(129, 199, 132, .5); box-shadow: 0 0 0 1px rgba(129,199,132,.2), 0 0 22px rgba(129,199,132,.2), 0 12px 28px rgba(0,0,0,.34); }
.gauge-detail.high .gauge-ring-progress { stroke: #81C784 !important; filter: drop-shadow(0 0 12px rgba(129,199,132,.55)); }
.gauge-status {
  position: absolute;
  left: 50%;
  bottom: -8px;
  transform: translateX(-50%);
  border-radius: 999px;
  padding: 3px 8px;
  font-size: 11px;
  font-weight: 700;
  border: 1px solid rgba(255,255,255,.16);
  background: rgba(19,18,33,.86);
  color: #e9edf9;
}
.gauge-status.low { color: #ffba98; }
.gauge-status.mid { color: #f6d682; }
.gauge-status.high { color: #a9e9ba; }
.gauge-side-clue {
  margin-bottom: 10px;
  padding: 8px 10px;
  border-radius: 10px;
  background: rgba(255,255,255,.03);
}
.energy-chip {
  display: inline-flex;
  border-radius: 999px;
  padding: 3px 9px;
  font-size: 11px;
  font-weight: 700;
  border: 1px solid rgba(255,255,255,.14);
  margin-bottom: 5px;
}
.energy-chip.low { color: #ffba98; border-color: rgba(255,138,101,.35); }
.energy-chip.mid { color: #f6d682; border-color: rgba(246,196,91,.35); }
.energy-chip.high { color: #a9e9ba; border-color: rgba(129,199,132,.35); }
.metric-inline-cause { opacity: .92; }
.energy-compare-wrap {
  margin-top: 8px;
  padding: 8px 10px;
  border-radius: 10px;
  background: rgba(255,255,255,.03);
}
.energy-row {
  display: grid;
  grid-template-columns: 64px 1fr auto;
  align-items: center;
  gap: 8px;
  margin-bottom: 6px;
}
.energy-row span { font-size: 11px; color: #cfd4e5; }
.energy-row b { font-size: 11px; color: #f0f3fb; }
.energy-bar {
  height: 8px;
  border-radius: 999px;
  background: rgba(255,255,255,.12);
  overflow: hidden;
}
.energy-bar i {
  display: block;
  height: 100%;
  width: 0;
  animation: fillBar .7s ease forwards;
  box-shadow: 0 0 10px currentColor;
}
.energy-bar i.solid { border-radius: 999px; }
.energy-bar i.dashed { background-image: repeating-linear-gradient(90deg, currentColor 0 7px, rgba(255,255,255,.2) 7px 12px) !important; }
.energy-bar i.wood { color: #4ADE80; background: #4ADE80; }
.energy-bar i.fire { color: #FB7185; background: #FB7185; }
.energy-bar i.earth { color: #FDE047; background: #FDE047; }
.energy-bar i.metal { color: #F8FAFC; background: #F8FAFC; }
.energy-bar i.water { color: #38BDF8; background: #38BDF8; }
.energy-bar i { width: var(--w, 50%); }
@keyframes fillBar { from { width: 0; } to { width: var(--w, 50%); } }
.gauge-tip-btn {
  position: absolute;
  right: -4px;
  top: -6px;
  width: 22px;
  height: 22px;
  min-width: 22px;
  min-height: 22px;
  border-radius: 50%;
  border: 1px solid rgba(255,255,255,.2);
  background: rgba(20,18,34,.78) !important;
  color: #dbe3ff;
  font-size: 12px;
  padding: 0;
  line-height: 1;
}
.gauge-floating-tip {
  position: absolute;
  left: 50%;
  top: 110%;
  transform: translateX(-50%);
  width: min(240px, 70vw);
  border-radius: 12px;
  border: 1px solid rgba(239,203,100,.42);
  background: rgba(14,14,24,.86);
  backdrop-filter: blur(8px);
  padding: 8px 10px;
  font-size: 13px;
  line-height: 1.5;
  z-index: 5;
  animation: tipDrop .22s ease;
}
.gauge-floating-tip strong { color: #f6d783; font-size: 12px; }
.gauge-floating-tip p { margin: 4px 0 0; color: #d8dff2; font-size: 12px; }
@keyframes tipDrop { from { opacity: 0; transform: translateX(-50%) translateY(-8px);} to { opacity: 1; transform: translateX(-50%) translateY(0);} }
@media (max-width: 640px) {
  .gauge-detail .gauge-layout { grid-template-columns: 1fr; }
  .gauge-detail .gauge-wrap { margin-inline: auto; }
}

.golden-calendar { display:flex; gap:10px; flex-wrap:wrap; margin: 8px 0; }
.day-mark {
  padding: 8px 12px;
  border-radius: 999px;
  border: 1px solid rgba(239,203,100,.42);
  background: rgba(239,203,100,.18);
  color: var(--text);
  font-weight: 700;
}

#mindKeywordCard {
  background: linear-gradient(160deg, rgba(31, 18, 56, .82), rgba(50, 28, 85, .76));
  border: 1px solid rgba(255,255,255,.14);
}

.reveal-page,
.ziwei-report-page {
  color: #E0E0E0;
}
.reveal-page h1,
.reveal-page h2,
.reveal-page h3,
.ziwei-report-page h1,
.ziwei-report-page h2,
.ziwei-report-page h3 {
  color: #f3f4f8;
}
.reveal-page p,
.reveal-page .small,
.ziwei-report-page p,
.ziwei-report-page .small {
  color: #E0E0E0;
}
.reveal-page .card,
.ziwei-report-page .card {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255,255,255,0.1);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
}

.locked-grid { display:grid; grid-template-columns: repeat(auto-fit,minmax(160px,1fr)); gap: 10px; }
.lock-card {
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 12px;
  background: rgba(255,255,255,.4);
  box-shadow: 0 14px 24px rgba(22,14,45,.12);
}
.lock-card.locked {
  filter: blur(1.5px);
  position: relative;
  overflow: hidden;
}
.lock-card .lock-icon {
  position: absolute;
  right: 10px;
  top: 8px;
  font-size: 26px;
  color: #efcb64;
  filter: drop-shadow(0 0 10px rgba(239,203,100,.55));
}
.lock-card .tease { font-weight: 700; color: rgba(255,240,190,.95); }
.lock-card.locked::before {
  content: attr(data-tip);
  position: absolute;
  left: 10px;
  right: 10px;
  bottom: 8px;
  font-size: 11px;
  color: rgba(255,245,210,.9);
  line-height: 1.4;
}

.glow-btn {
  box-shadow: 0 0 0 rgba(239,203,100,0);
  animation: glowPulse 1.7s ease-in-out infinite;
}
.glossy-btn {
  position: relative;
  overflow: hidden;
}
.glossy-btn::after {
  content: '';
  position: absolute;
  top: 0;
  left: -130%;
  width: 58%;
  height: 100%;
  background: linear-gradient(110deg, transparent, rgba(255,255,255,.35), transparent);
  animation: glossySweep 2.4s ease-in-out infinite;
}
@keyframes glowPulse {
  0%,100% { box-shadow: 0 0 0 0 rgba(239,203,100,.05), 0 8px 14px rgba(29,18,58,.22); }
  50% { box-shadow: 0 0 0 8px rgba(239,203,100,.1), 0 12px 20px rgba(29,18,58,.3); }
}
@keyframes glossySweep {
  0% { left: -130%; }
  60%,100% { left: 155%; }
}

.experts-top-banner {
  background: linear-gradient(90deg, rgba(75,54,124,.95), rgba(120,83,195,.9));
  color: #fff;
}
.experts-top-banner p { color: rgba(255,255,255,.95); margin: 0 0 6px; }

.card, .tarot-card, .counselor-row, .option, .btn {
  box-shadow: 0 14px 24px rgba(20, 12, 38, .18), 0 2px 5px rgba(20,12,38,.12);
}

body::after {
  content: '';
  position: fixed;
  inset: 0;
  pointer-events: none;
  background: none;
  opacity: 0;
}
@keyframes particleDrift {
  0% { transform: translateY(0); }
  50% { transform: translateY(-8px); }
  100% { transform: translateY(0); }
}
